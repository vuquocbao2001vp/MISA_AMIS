{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport MButtonDropdown from '@/components/base/button/MButtonDropdown.vue';\nimport MTable from '@/components/base/table/MTable.vue';\nimport EmployeeDetail from './EmployeeDetail.vue';\nimport { mapMutations, mapActions, mapGetters } from \"vuex\";\nexport default {\n  components: {\n    MButtonDropdown,\n    MTable,\n    EmployeeDetail\n  },\n\n  data() {\n    return {\n      isHideDetail: true,\n      timeout: null,\n      searchKey: \"\",\n      enableMultiAction: false,\n      deleteAction: false,\n      isCheckAll: false,\n      isCheck: [],\n      employeeSelectedIds: []\n    };\n  },\n\n  mounted() {\n    this.getEmployeePagingData({\n      pageSize: 20,\n      pageNumber: 1\n    });\n  },\n\n  computed: { ...mapGetters([\"employees\", \"employeePaging\"])\n  },\n  methods: { ...mapMutations([\"getEmployeePaging\"]),\n    ...mapActions([\"getEmployeePagingData\"]),\n\n    /**\r\n     * Ẩn hiện dialog chi tiết nhân viên\r\n     * Author: VQBao - 11/10/2022\r\n     */\n    hideDetail(isHide) {\n      this.isHideDetail = isHide;\n    },\n\n    /**\r\n     * Lấy ra từ khóa tìm kiếm sau khi nhập xong input\r\n     * Author; VQBao - 11/10/2022\r\n     */\n    getTextSearch(data) {\n      clearTimeout(this.timeout);\n      var self = this;\n      self.timeout = setTimeout(function () {\n        self.searchKey = data.value;\n      }, 500);\n    },\n\n    /**\r\n     * Load lại dữ liệu\r\n     * Author; VQBao - 11/10/2022\r\n     */\n    loadData(pageSize, pageNumber, searchKey) {\n      this.getEmployeePagingData({\n        pageSize: pageSize,\n        pageNumber: pageNumber,\n        searchKey: searchKey\n      });\n    },\n\n    showMultiAction() {\n      this.enableMultiAction = !this.enableMultiAction;\n    },\n\n    deleteEmployees() {\n      this.deleteAction = true;\n    },\n\n    /**\r\n    * Thực hiện chọn tất cả nhân viên\r\n    * Author: VQBao - 11/10/2022\r\n    */\n    checkAllCheckbox() {\n      this.employeeSelectedIds = [];\n\n      if (!this.isCheckAll) {\n        this.isCheckAll = true;\n\n        for (let i = 0; i < this.employees.length; i++) {\n          this.isCheck[i] = true;\n          this.employeeSelectedIds.push(this.employees[i].EmployeeID);\n        }\n      } else {\n        this.resetAllCheckbox();\n      }\n    },\n\n    /**\r\n     * Thực hiện chọn từng nhân viên\r\n     * Author: VQBao - 11/10/2022\r\n     */\n    checkCheckbox(employee, index) {\n      if (!this.isCheck[index]) {\n        this.isCheck[index] = true;\n        this.employeeSelectedIds.push(employee.EmployeeID);\n\n        if (this.employeeSelectedIds.length == this.employees.length) {\n          this.isCheckAll = true;\n        }\n      } else {\n        this.isCheck[index] = false;\n        this.isCheckAll = false;\n        let id = this.employeeSelectedIds.indexOf(employee.EmployeeID);\n        this.employeeSelectedIds.splice(id, 1);\n      }\n\n      console.log(this.employeeSelectedIds.toString());\n    },\n\n    // showDeleteDropdown(){\n    //   document.getElementById(\"ok\");\n    // },\n\n    /**\r\n     * Đặt lại các checkbox về giá trị false\r\n     * Author: VQBao - 11/10/2022\r\n     */\n    resetAllCheckbox() {\n      for (let i = 0; i < this.isCheck.length; i++) {\n        this.isCheck[i] = false;\n      }\n\n      this.employeeSelectedIds = [];\n      this.isCheckAll = false;\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["MButtonDropdown","MTable","EmployeeDetail","mapMutations","mapActions","mapGetters","components","data","isHideDetail","timeout","searchKey","enableMultiAction","deleteAction","isCheckAll","isCheck","employeeSelectedIds","mounted","getEmployeePagingData","pageSize","pageNumber","computed","methods","hideDetail","isHide","getTextSearch","clearTimeout","self","setTimeout","value","loadData","showMultiAction","deleteEmployees","checkAllCheckbox","i","employees","length","push","EmployeeID","resetAllCheckbox","checkCheckbox","employee","index","id","indexOf","splice","console","log","toString"],"sourceRoot":"","sources":["E:\\MisaProject\\MISA_AMIS\\MISA_AMIS_FE\\misa-amis\\src\\pages\\Employee\\PageEmployee.vue"],"sourcesContent":["<template>\r\n  <div class=\"header flex\">\r\n    <div class=\"header-title\">Nhân viên</div>\r\n    <div class=\"header-right flex\">\r\n        <m-button-dropdown buttonName=\"Tiện ích\" buttonType=\"white\"></m-button-dropdown>\r\n        <div @click=\"hideDetail(false)\"><m-button-dropdown buttonName=\"Thêm\" buttonType=\"green\"></m-button-dropdown></div>\r\n    </div>\r\n  </div>\r\n  <div class=\"toolbar flex\">\r\n    <div style=\"position: relative\">\r\n        <div @click=\"showMultiAction\"><m-button-dropdown buttonName=\"Thực hiện hàng loạt\" buttonType=\"white\"></m-button-dropdown></div>\r\n        <div @click=\"deleteEmployees\" v-show=\"enableMultiAction\" id=\"btnMultiDelete\">Xóa</div>\r\n    </div>\r\n    <div class=\"toolbar-right flex\">\r\n        <div class=\"input-search\">\r\n            <DxTextBox \r\n                class=\"control-textbox\"\r\n                placeholder=\"Tìm theo mã, tên nhân viên\"\r\n                value-change-event=\"keyup\"\r\n                @value-changed=\"getTextSearch\"\r\n            />\r\n            <div class=\"icon-textbox flex\"><div class=\"icon-search\"></div></div>\r\n        </div>\r\n        <div class=\"toolbar-icon flex\" @click=\"getEmployeePagingData({pageSize: 20, pageNumber: 1})\"><div class=\"icon-reload\" title=\"Lấy lại dữ liệu\"></div></div>\r\n        <div class=\"toolbar-icon flex\"><div class=\"icon-export\" title=\"Xuất ra Excel\"></div></div>\r\n        <div class=\"toolbar-icon flex\"><div class=\"icon-setting\" title=\"Tùy chỉnh giao diện\"></div></div>\r\n    </div>\r\n  </div>\r\n  <div class=\"grid\">\r\n    <m-table\r\n        :employees=\"employees\"\r\n        :searchKey=\"searchKey\"\r\n        :totalRecords=\"employeePaging.totalRecords\"\r\n        :pageSize=\"employeePaging.pageSize\"\r\n        :pageNumber=\"employeePaging.pageNumber\"\r\n        @hideDetail=\"hideDetail\"\r\n        @loadData=\"loadData\"\r\n    >\r\n      <template #thead-left>\r\n        <m-checkbox\r\n          @click=\"checkAllCheckbox\"\r\n          :isCheck=\"isCheckAll\"\r\n        />\r\n      </template>\r\n      <template #tbody-left {employee, index}>\r\n        <m-checkbox\r\n          @click=\"checkCheckbox(employee, index)\"\r\n        />\r\n      </template>\r\n    </m-table>\r\n  </div>\r\n  <EmployeeDetail\r\n    :isHide=\"isHideDetail\"\r\n    @hideDetail=\"hideDetail\"\r\n  />\r\n</template>\r\n\r\n<script>\r\nimport MButtonDropdown from '@/components/base/button/MButtonDropdown.vue'\r\nimport MTable from '@/components/base/table/MTable.vue'\r\nimport EmployeeDetail from './EmployeeDetail.vue'\r\nimport { mapMutations, mapActions, mapGetters } from \"vuex\";\r\n\r\nexport default {\r\n  components: { MButtonDropdown, MTable, EmployeeDetail},\r\n  data() {\r\n    return {\r\n        isHideDetail: true,\r\n        timeout: null,\r\n        searchKey: \"\",\r\n        enableMultiAction: false,\r\n        deleteAction: false,\r\n\r\n        isCheckAll: false,\r\n      isCheck: [],\r\n      employeeSelectedIds: [],\r\n    }\r\n  },\r\n  mounted(){\r\n    this.getEmployeePagingData({pageSize: 20, pageNumber: 1});\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"employees\", \"employeePaging\"])\r\n  },\r\n  methods: {\r\n    ...mapMutations([\"getEmployeePaging\"]),\r\n    ...mapActions([\"getEmployeePagingData\"]),\r\n\r\n    /**\r\n     * Ẩn hiện dialog chi tiết nhân viên\r\n     * Author: VQBao - 11/10/2022\r\n     */\r\n    hideDetail(isHide){\r\n        this.isHideDetail = isHide;\r\n    },\r\n\r\n    /**\r\n     * Lấy ra từ khóa tìm kiếm sau khi nhập xong input\r\n     * Author; VQBao - 11/10/2022\r\n     */\r\n    getTextSearch(data) {\r\n      clearTimeout(this.timeout);\r\n      var self = this;\r\n      self.timeout = setTimeout(function () {\r\n        self.searchKey = data.value;\r\n      }, 500);\r\n    },\r\n\r\n    /**\r\n     * Load lại dữ liệu\r\n     * Author; VQBao - 11/10/2022\r\n     */\r\n    loadData(pageSize, pageNumber, searchKey){\r\n        this.getEmployeePagingData({pageSize: pageSize, pageNumber: pageNumber, searchKey: searchKey});\r\n    },\r\n\r\n    showMultiAction(){\r\n      this.enableMultiAction = !this.enableMultiAction;\r\n    },\r\n    deleteEmployees(){\r\n      this.deleteAction = true;\r\n    },\r\n\r\n\r\n\r\n\r\n        /**\r\n     * Thực hiện chọn tất cả nhân viên\r\n     * Author: VQBao - 11/10/2022\r\n     */\r\n    checkAllCheckbox(){\r\n      this.employeeSelectedIds = [];\r\n      if(!this.isCheckAll){\r\n        this.isCheckAll = true;\r\n        for (let i = 0; i < this.employees.length; i++) {\r\n          this.isCheck[i] = true;\r\n          this.employeeSelectedIds.push(this.employees[i].EmployeeID);\r\n        }\r\n      } else {\r\n        this.resetAllCheckbox();\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Thực hiện chọn từng nhân viên\r\n     * Author: VQBao - 11/10/2022\r\n     */\r\n    checkCheckbox(employee, index){\r\n      if(!this.isCheck[index]){\r\n        this.isCheck[index] = true;\r\n        this.employeeSelectedIds.push(employee.EmployeeID);\r\n        if(this.employeeSelectedIds.length == this.employees.length){\r\n          this.isCheckAll = true;\r\n        }\r\n      } else {\r\n        this.isCheck[index] = false;\r\n        this.isCheckAll = false;\r\n        let id = this.employeeSelectedIds.indexOf(employee.EmployeeID);\r\n        this.employeeSelectedIds.splice(id, 1);\r\n      }\r\n      console.log(this.employeeSelectedIds.toString());\r\n    },\r\n\r\n    // showDeleteDropdown(){\r\n    //   document.getElementById(\"ok\");\r\n    // },\r\n    /**\r\n     * Đặt lại các checkbox về giá trị false\r\n     * Author: VQBao - 11/10/2022\r\n     */\r\n    resetAllCheckbox(){\r\n      for (let i = 0; i < this.isCheck.length; i++) {\r\n        this.isCheck[i] = false;\r\n      }\r\n      this.employeeSelectedIds = [];\r\n      this.isCheckAll = false;\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.header {\r\n    padding: 24px 0;\r\n}\r\n.header-title {\r\n    font-size: 24px;\r\n    font-weight: 700;\r\n    color: #111;\r\n    font-family: Misa Font Bold;\r\n    min-width: 125px;\r\n}\r\n.header-right {\r\n    justify-content: flex-end;\r\n    width: calc(100% - 125px);\r\n}\r\n.toolbar {\r\n    padding: 16px 16px 16px 4px;\r\n    height: 68px;\r\n    background-color: #fff;\r\n    position: relative;\r\n    box-sizing: border-box;\r\n}\r\n.input-search {\r\n    width: 240px;\r\n    height: 32px;\r\n    box-sizing: border-box;\r\n    position: relative;\r\n    margin-right: 10px;\r\n}\r\n.control-textbox {\r\n    padding-right: 28px;\r\n    width: 100% !important;\r\n}\r\n.icon-textbox {\r\n  position: absolute;\r\n  content: \"\";\r\n  top: 8px;\r\n  right: 10px;\r\n  width: 18px;\r\n  height: 18px;\r\n  z-index: 1;\r\n  justify-content: center;\r\n}\r\n.toolbar-icon {\r\n    width: 24px;\r\n    height: 24px;\r\n    justify-content: center;\r\n    cursor: pointer;\r\n    margin: 0 6px;\r\n}\r\n.icon-reload {\r\n    background: url(./../../assets/img/Sprites.64af8f61.svg) no-repeat -425px -201px;\r\n\twidth: 21px;\r\n\theight: 23px;\r\n}\r\n.icon-reload:hover {\r\n    background: url(./../../assets/img/Sprites.64af8f61.svg) no-repeat -1098px -90px;\r\n\twidth: 20px;\r\n\theight: 21px;\r\n}\r\n.icon-export {\r\n    background: url(./../../assets/img/Sprites.64af8f61.svg) no-repeat -705px -202px;\r\n\twidth: 23px;\r\n\theight: 20px;\r\n}\r\n.icon-export:hover {\r\n    background: url(./../../assets/img/Sprites.64af8f61.svg) no-repeat -1265px -90px;\r\n\twidth: 23px;\r\n\theight: 20px;\r\n}\r\n.icon-setting {\r\n    background: url(./../../assets/img/Sprites.64af8f61.svg) no-repeat -90px -201px;\r\n\twidth: 20px;\r\n\theight: 22px;\r\n}\r\n.icon-setting:hover {\r\n    background: url(./../../assets/img/Sprites.64af8f61.svg) no-repeat -33px -144px;\r\n\twidth: 23px;\r\n\theight: 24px;\r\n}\r\n.toolbar-right {\r\n    justify-content: center;\r\n    position: absolute;\r\n    right: 16px;\r\n}\r\n.grid {\r\n    background-color: #fff;\r\n    height: calc(100vh - 48px - 84px - 68px);\r\n    box-sizing: border-box;\r\n    padding: 16px 30px 0 20px;\r\n    position: relative;\r\n}\r\n#btnMultiDelete {\r\n    display: flex;\r\n    align-items: center;\r\n    position: absolute;\r\n    width: 100px;\r\n    height: 34px;\r\n    box-sizing: border-box;\r\n    border: 1px solid #babec5;\r\n    border-radius: 2px;\r\n    background-color: #fff;\r\n    padding: 2px 12px;\r\n    z-index: 20;\r\n    right: 0;\r\n    top: 38px;\r\n    cursor: pointer;\r\n}\r\n#btnMultiDelete:hover {\r\n    background-color: #eceef1;\r\n}\r\n\r\ntbody tr:hover .td-checkbox, tbody tr:hover .td-expand {\r\n  background-color: #E5F3FF;\r\n}\r\n.row-selected .td-checkbox, .row-selected .td-expand {\r\n  background-color: #E5F3FF;\r\n}\r\n.td-checkbox {\r\n  position: sticky !important;\r\n  left: 0;\r\n  z-index: 3;\r\n  background-color: #fff;\r\n}\r\nth.td-checkbox, th.td-expand {\r\n  background-color: #f4f5f8;\r\n  z-index: 4;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}