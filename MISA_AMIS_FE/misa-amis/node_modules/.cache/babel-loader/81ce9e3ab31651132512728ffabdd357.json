{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport ConstApi from '../../../constants/api/constApi';\nimport MISAResource from '../../../constants/resources/MISAResource';\nimport MCheckbox from '../checkbox/MCheckbox.vue';\nimport formatDate from '../../../constants/extensions/formatDate';\nimport MISAEnum from '../../../constants/enums/MISAEnum.js';\nimport MPopup from '../popup/MPopup.vue';\nimport { mapMutations, mapActions, mapGetters } from \"vuex\";\nexport default {\n  components: {\n    MCheckbox,\n    MPopup\n  },\n  props: ['employees', 'totalRecords', 'totalPages', 'pageSize', 'pageNumber', 'searchKey'],\n  emits: ['hideDetail', 'loadData', 'showToast'],\n\n  data() {\n    return {\n      pageSelection: [{\n        'id': 10,\n        'selection': '10 bản ghi trên 1 trang'\n      }, {\n        'id': 20,\n        'selection': '20 bản ghi trên 1 trang'\n      }, {\n        'id': 30,\n        'selection': '30 bản ghi trên 1 trang'\n      }, {\n        'id': 50,\n        'selection': '50 bản ghi trên 1 trang'\n      }, {\n        'id': 100,\n        'selection': '100 bản ghi trên 1 trang'\n      }],\n      tableHeaders: [{\n        \"caption\": \"MÃ NHÂN VIÊN\",\n        \"align\": \"text-left\",\n        \"style\": \"min-width: 154px\"\n      }, {\n        \"caption\": \"TÊN NHÂN VIÊN\",\n        \"align\": \"text-left\",\n        \"style\": \"min-width: 212px\"\n      }, {\n        \"caption\": \"GIỚI TÍNH\",\n        \"align\": \"text-left\",\n        \"style\": \"min-width: 115px\"\n      }, {\n        \"caption\": \"NGÀY SINH\",\n        \"align\": \"text-center\",\n        \"style\": \"min-width: 150px\"\n      }, {\n        \"caption\": \"SỐ CMND\",\n        \"align\": \"text-left\",\n        \"style\": \"min-width: 200px\",\n        \"title\": \"Số chứng minh nhân dân\"\n      }, {\n        \"caption\": \"CHỨC DANH\",\n        \"align\": \"text-left\",\n        \"style\": \"min-width: 250px\"\n      }, {\n        \"caption\": \"TÊN ĐƠN VỊ\",\n        \"align\": \"text-left\",\n        \"style\": \"min-width: 250px\"\n      }, {\n        \"caption\": \"SỐ TÀI KHOẢN\",\n        \"align\": \"text-left\",\n        \"style\": \"min-width: 150px\"\n      }, {\n        \"caption\": \"TÊN NGÂN HÀNG\",\n        \"align\": \"text-left\",\n        \"style\": \"min-width: 250px\"\n      }, {\n        \"caption\": \"CHI NHÁNH NGÂN HÀNG\",\n        \"align\": \"text-left\",\n        \"style\": \"min-width: 250px; border-right: 0;\"\n      }, {\n        \"caption\": \"CHỨC NĂNG\",\n        \"align\": \"text-center td-expand\",\n        \"style\": \"min-width: 120px\"\n      }],\n      gender: [\"Nam\", \"Nữ\", \"\"],\n      dPageSize: 20,\n      isExpand: false,\n      expandPosition: {},\n      isCheckAll: false,\n      isCheck: [],\n      employeeSelectedIds: [],\n      message: \"\",\n      showWarning: false,\n      enableMultiAction: false,\n      isShowMultiAction: false,\n      ids: null,\n      pageNumberSelected: 1,\n      pageNumberArray: []\n    };\n  },\n\n  created() {\n    this.DeleteMode = MISAEnum.DeleteMode;\n  },\n\n  mounted() {\n    // Gán giá trị các checkbox = false\n    for (let i = 0; i < this.employees.length; i++) {\n      this.isCheck[i] = false;\n    }\n\n    this.selectPageNumber(1);\n  },\n\n  computed: { ...mapGetters([\"employeeSelected\"])\n  },\n  watch: {\n    pageSize: function (value) {\n      this.dPageSize = value;\n    },\n    searchKey: function (value) {\n      this.loadPaging(this.dPageSize, 1, value);\n      this.resetAllCheckbox();\n    },\n    dPageSize: function (value) {\n      this.loadPaging(value, this.pageNumber, this.searchKey);\n      this.resetAllCheckbox();\n    },\n    pageNumber: function (value) {\n      this.pageNumberSelected = value;\n    },\n    pageNumberSelected: function (value) {\n      this.loadPaging(this.dPageSize, value, this.searchKey);\n      this.resetAllCheckbox();\n    }\n  },\n  methods: {\n    formatDate,\n    ...mapMutations([\"setEmployeeById\"]),\n    ...mapActions([\"getEmployeeById\"]),\n\n    /**\r\n     * Phân trang lại dữ liệu\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    loadPaging(pageSize, pageNumber, searchKey) {\n      this.$emit(\"loadData\", pageSize, pageNumber, searchKey);\n      this.selectPageNumber(pageNumber);\n    },\n\n    /**\r\n     * Khi bấm vào mũi tên ở ô chức năng thì hiện tùy chọn các chức năng\r\n     * Author: VQBao - 11/10/2022\r\n     */\n    expandFunctionRow(emp) {\n      if (!this.isExpand) {\n        this.isExpand = true;\n        var pos = event.target.getBoundingClientRect();\n        this.expandPosition.top = pos.top + 20;\n        this.expandPosition.left = pos.left - 80;\n        this.expandPosition.employeeId = emp.EmployeeID;\n        this.expandPosition.employeeCode = emp.EmployeeCode;\n      } else {\n        this.isExpand = false;\n        this.expandPosition = {};\n      }\n    },\n\n    /**\r\n     * Thực hiện chọn tất cả nhân viên\r\n     * Author: VQBao - 11/10/2022\r\n     */\n    checkAllCheckbox() {\n      this.employeeSelectedIds = [];\n\n      if (!this.isCheckAll) {\n        this.isCheckAll = true;\n\n        for (let i = 0; i < this.employees.length; i++) {\n          this.isCheck[i] = true;\n          this.employeeSelectedIds.push(this.employees[i].EmployeeID);\n        }\n\n        this.enableActions(true);\n      } else {\n        this.resetAllCheckbox();\n        this.enableActions(false);\n      }\n    },\n\n    /**\r\n     * Thực hiện chọn từng nhân viên\r\n     * Author: VQBao - 11/10/2022\r\n     */\n    checkCheckbox(employee, index) {\n      if (!this.isCheck[index]) {\n        this.isCheck[index] = true;\n        this.employeeSelectedIds.push(employee.EmployeeID);\n\n        if (this.employeeSelectedIds.length == this.employees.length) {\n          this.isCheckAll = true;\n        }\n\n        this.enableActions(true);\n      } else {\n        this.isCheck[index] = false;\n        this.isCheckAll = false;\n        let id = this.employeeSelectedIds.indexOf(employee.EmployeeID);\n        this.employeeSelectedIds.splice(id, 1);\n\n        if (this.employeeSelectedIds.length == 0) {\n          this.enableActions(false);\n        }\n      }\n    },\n\n    /**\r\n     * Đặt lại các checkbox về giá trị false\r\n     * Author: VQBao - 11/10/2022\r\n     */\n    resetAllCheckbox() {\n      for (let i = 0; i < this.isCheck.length; i++) {\n        this.isCheck[i] = false;\n      }\n\n      this.employeeSelectedIds = [];\n      this.isCheckAll = false;\n      this.isShowMultiAction = false;\n      this.enableMultiAction = false;\n    },\n\n    /**\r\n     * Khi chọn xóa, hiện popup cảnh báo\r\n     * Author: VQBao - 11/10/2022\r\n     */\n    deleteEmployeesOnClick(mode) {\n      this.showWarning = true;\n\n      if (mode == 1) {\n        this.ids = this.expandPosition.employeeId;\n        this.message = \"Bạn có thực sự muốn xóa Nhân viên <\" + this.expandPosition.employeeCode + \"> không?\";\n      } else if (mode == 2) {\n        this.ids = this.employeeSelectedIds.toString();\n        this.message = \"Bạn có thực sự muốn xóa những nhân viên đã chọn không?\";\n      }\n\n      this.isExpand = false;\n    },\n\n    /**\r\n     * Hủy xóa nhân viên\r\n     * Author: VQBao - 11/10/2022\r\n     */\n    cancelDelete() {\n      this.showWarning = false;\n      this.message = \"\";\n    },\n\n    /**\r\n     * Gọi api xóa nhân viên\r\n     * Author: VQBao - 11/10/2022\r\n     */\n    deleteEmployees(ids) {\n      document.getElementById(\"loader\").style.display = \"block\";\n      var me = this;\n\n      try {\n        axios.delete(ConstApi.EmployeeApi, {\n          params: {\n            ids: ids\n          }\n        }).then(() => {\n          document.getElementById(\"loader\").style.display = \"none\";\n          me.expandPosition = {};\n          me.showWarning = false;\n          me.loadPaging(20, 1);\n          me.resetAllCheckbox();\n          me.$emit(\"showToast\", MISAResource.TOAST.Delete, 'success');\n        }).catch(error => {\n          document.getElementById(\"loader\").style.display = \"none\";\n          me.$emit(\"showToast\", error.response.data.errorMsg, 'error');\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    },\n\n    /**\r\n     * Gọi api lấy dữ liệu nhân viên theo id rồi binding vào form chi tiết\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    async showEmployeeSelectedDetail(id) {\n      await this.getEmployeeById(id);\n      this.$emit(\"hideDetail\", 2, false, this.employeeSelected);\n      this.isExpand = false;\n    },\n\n    /**\r\n     * Thực hiện nhân bản nhân viên\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    async duplicateEmployee() {\n      await this.getEmployeeById(this.expandPosition.employeeId);\n      this.$emit(\"hideDetail\", 3, false, this.employeeSelected);\n      this.isExpand = false;\n    },\n\n    /**\r\n     * Thực hiện disable, enable button thực hiện hàng loạt\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    enableActions(isEnable) {\n      this.enableMultiAction = isEnable;\n    },\n\n    /**\r\n     * Thực hiện đóng mở chức năng mở rộng khi click thực hiện hàng loạt\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    showMultiAction() {\n      if (this.enableMultiAction && !this.isShowMultiAction) {\n        this.isShowMultiAction = true;\n      } else if (this.enableMultiAction && this.isShowMultiAction) {\n        this.isShowMultiAction = false;\n      }\n    },\n\n    /**\r\n     * Thực hiện ẩn các chức năng hàng loạt\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    closeMultiAction() {\n      this.isShowMultiAction = false;\n    },\n\n    /**\r\n     * Chuyển tới trang tiếp theo\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    toNextPage() {\n      if (this.pageNumberSelected < this.totalPages) {\n        this.selectPageNumber(this.pageNumberSelected + 1);\n      }\n    },\n\n    /**\r\n     * Chuyển tới trang kế trước\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    toPrevPage() {\n      if (this.pageNumberSelected > 1) {\n        this.selectPageNumber(this.pageNumberSelected - 1);\n      }\n    },\n\n    /**\r\n     * Chọn trang\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    selectPageNumber(number, index) {\n      if (this.totalPages < 6 && this.totalPages > 2) {\n        this.pageNumberSelected = number;\n        this.pageNumberArray = [];\n\n        for (let i = 2; i < this.totalPages; i++) {\n          this.pageNumberArray.push(i);\n        }\n      } else {\n        // Chọn số thứ tự trang\n        if (number != '...') {\n          if (number == 2 || number == 1) {\n            this.pageNumberArray = [2, 3, '...'];\n          } else if (number == this.totalPages) {\n            this.pageNumberArray = ['...', number - 2, number - 1];\n          } else if (number == this.totalPages - 1 || number == this.totalPages - 2) {\n            this.pageNumberArray = ['...', this.totalPages - 2, this.totalPages - 1];\n          } else {\n            this.pageNumberArray = ['...', number, number + 1, '...'];\n          }\n\n          this.pageNumberSelected = number;\n        } // Chọn lại số trang hiển thị để người dùng lựa chọn\n        else if (number == '...') {\n          var stringArray = this.pageNumberArray.toString();\n          var numberSelected = this.pageNumberSelected;\n\n          if (numberSelected == 1 || numberSelected == this.totalPages || numberSelected == 2 || numberSelected == this.totalPages - 1) {\n            if (stringArray == \"2,3,...\") {\n              this.pageNumberArray = ['...', this.totalPages - 2, this.totalPages - 1];\n            } else {\n              this.pageNumberArray = [2, 3, '...'];\n            }\n          } else {\n            if (index < 1 && (this.pageNumberArray[1] == 3 || this.pageNumberArray[1] == 4)) {\n              this.pageNumberArray = [2, 3, '...'];\n            } else if (index < 1 && this.pageNumberArray[1] > 4) {\n              this.pageNumberArray = ['...', this.pageNumberArray[1] - 2, this.pageNumberArray[1] - 1, '...'];\n            } else if (index > 2 && this.pageNumberArray[1] == this.totalPages - 4) {\n              this.pageNumberArray = ['...', this.totalPages - 2, this.totalPages - 1];\n            } else if (index > 2 && this.pageNumberArray[1] < this.totalPages - 4) {\n              this.pageNumberArray = ['...', this.pageNumberArray[1] + 1, this.pageNumberArray[1] + 2, '...'];\n            }\n          }\n        }\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","ConstApi","MISAResource","MCheckbox","formatDate","MISAEnum","MPopup","mapMutations","mapActions","mapGetters","components","props","emits","data","pageSelection","tableHeaders","gender","dPageSize","isExpand","expandPosition","isCheckAll","isCheck","employeeSelectedIds","message","showWarning","enableMultiAction","isShowMultiAction","ids","pageNumberSelected","pageNumberArray","created","DeleteMode","mounted","i","employees","length","selectPageNumber","computed","watch","pageSize","value","searchKey","loadPaging","resetAllCheckbox","pageNumber","methods","$emit","expandFunctionRow","emp","pos","event","target","getBoundingClientRect","top","left","employeeId","EmployeeID","employeeCode","EmployeeCode","checkAllCheckbox","push","enableActions","checkCheckbox","employee","index","id","indexOf","splice","deleteEmployeesOnClick","mode","toString","cancelDelete","deleteEmployees","document","getElementById","style","display","me","delete","EmployeeApi","params","then","TOAST","Delete","catch","error","response","errorMsg","console","log","showEmployeeSelectedDetail","getEmployeeById","employeeSelected","duplicateEmployee","isEnable","showMultiAction","closeMultiAction","toNextPage","totalPages","toPrevPage","number","stringArray","numberSelected"],"sourceRoot":"","sources":["E:\\MisaProject\\MISA_AMIS\\MISA_AMIS_FE\\misa-amis\\src\\components\\base\\table\\MTable.vue"],"sourcesContent":["<template>\r\n  <div class=\"multi-action\">\r\n    <div v-click-outside-element=\"closeMultiAction\" @click=\"showMultiAction\"><m-button-dropdown :enable=\"enableMultiAction\" buttonName=\"Thực hiện hàng loạt\" buttonType=\"white\"></m-button-dropdown></div>\r\n    <div @click=\"deleteEmployeesOnClick(2)\" v-show=\"isShowMultiAction\" id=\"btnMultiDelete\">Xóa</div>\r\n  </div>\r\n  <div class=\"content-table\">\r\n    <table>\r\n      <thead>\r\n        <tr>\r\n          <th class=\"td-checkbox\">\r\n            <m-checkbox\r\n              @click=\"checkAllCheckbox\"\r\n              :isCheck=\"isCheckAll\"\r\n            />\r\n          </th>\r\n          <th v-for=\"header in tableHeaders\" :key=\"header.caption\" :title=\"header.title\" :class=\"header.align\" :style=\"header.style\">{{header.caption}}</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"(employee, index) in employees\" :key=\"employee.EmployeeID\" @dblclick=\"showEmployeeSelectedDetail(employee.EmployeeID)\" :class=\"isCheck[index] ? 'row-selected' : ''\">\r\n          <td class=\"td-checkbox\">\r\n            <m-checkbox\r\n              @click=\"checkCheckbox(employee,index)\"\r\n              :isCheck=\"isCheck[index]\"\r\n            />\r\n          </td>\r\n          <td>{{employee.EmployeeCode}}</td>\r\n          <td>{{employee.FullName}}</td>\r\n          <td>{{gender[employee.Gender - 1]}}</td>\r\n          <td class=\"text-center\">{{formatDate(employee.DateOfBirth)}}</td>\r\n          <td>{{employee.IdentityNumber}}</td>\r\n          <td>{{employee.PositionName}}</td>\r\n          <td>{{employee.OrganizationName}}</td>\r\n          <td>{{employee.BankAccount}}</td>\r\n          <td>{{employee.BankName}}</td>\r\n          <td style=\"border-right: 0\">{{employee.BankBranch}}</td>\r\n          <td class=\"td-expand\">\r\n            <div class=\"flex-expand flex\">\r\n              <span id=\"btnUpdate\" @click=\"showEmployeeSelectedDetail(employee.EmployeeID)\">Sửa</span>\r\n              <div @click=\"expandFunctionRow(employee)\" class=\"selection-expand flex\"><div class=\"icon-expand\"></div></div>\r\n            </div>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <div class=\"table-paging flex\">\r\n      <div class=\"paging-total\">Tổng số: <b>{{totalRecords}}</b> bản ghi</div>\r\n      <div class=\"paging-right flex\">\r\n          <div class=\"paging-selection\">\r\n            <DxSelectBox\r\n              placeholder=\"\"\r\n              :data-source=\"pageSelection\"\r\n              display-expr=\"selection\"\r\n              value-expr=\"id\"\r\n              v-model:value=\"dPageSize\"\r\n            />\r\n          </div>\r\n          <div class=\"paging-nav flex\">\r\n            <div class=\"paging-prev\" :class=\"{'disable-text': pageNumberSelected == 1}\" @click=\"toPrevPage\">Trước</div>\r\n            <div class=\"paging-number flex\">\r\n              <div class=\"number\" :class=\"{'number-border': pageNumberSelected == 1}\" @click=\"selectPageNumber(1)\">1</div>\r\n              <div v-if=\"totalPages > 2\" class=\"flex\"><div v-for=\"(pNumber, index) in pageNumberArray\" :key=\"pNumber\" class=\"number\" :class=\"{'number-border': pNumber == pageNumberSelected}\" @click=\"selectPageNumber(pNumber, index)\">{{pNumber}}</div></div>\r\n              <div v-if=\"totalPages > 1\" class=\"number\" :class=\"{'number-border': pageNumberSelected == totalPages}\" @click=\"selectPageNumber(totalPages)\">{{totalPages}}</div>\r\n            </div>\r\n            <div class=\"paging-next\" :class=\"{'disable-text': pageNumberSelected == totalPages}\" @click=\"toNextPage\">Sau</div>\r\n          </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div\r\n    class=\"detail-function-table\" v-show=\"isExpand\" :style=\"'top: ' + expandPosition.top + 'px; left: ' + expandPosition.left + 'px'\"\r\n  >\r\n    <div class=\"detail-btn\" @click=\"duplicateEmployee\">Nhân bản</div>\r\n    <div class=\"detail-btn\" @click=\"deleteEmployeesOnClick(1)\">Xóa</div>\r\n    <div class=\"detail-btn\">Ngừng sử dụng</div>\r\n  </div>\r\n  <m-popup v-show=\"showWarning\">\r\n    <template #content>\r\n      <div class=\"noti-popup\">\r\n        <div class=\"noti-icon flex\"><div class=\"icon-warning\"></div></div>\r\n        <span class=\"noti-text\">{{message}}</span>\r\n      </div>\r\n      <div class=\"content-control flex\">\r\n        <div class=\"control-left\">\r\n          <div @click=\"cancelDelete\"><m-button buttonName=\"Không\" buttonType=\"white\"></m-button></div>\r\n        </div>\r\n        <div class=\"control-right\">\r\n          <div @click=\"deleteEmployees(ids)\"><m-button buttonName=\"Có\" buttonType=\"green\"></m-button></div>\r\n        </div>\r\n      </div>\r\n    </template>\r\n  </m-popup>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport ConstApi from '../../../constants/api/constApi'\r\nimport MISAResource from '../../../constants/resources/MISAResource'\r\nimport MCheckbox from '../checkbox/MCheckbox.vue'\r\nimport formatDate from '../../../constants/extensions/formatDate'\r\nimport MISAEnum from '../../../constants/enums/MISAEnum.js'\r\nimport MPopup from '../popup/MPopup.vue'\r\nimport { mapMutations, mapActions, mapGetters } from \"vuex\";\r\n\r\nexport default {\r\n  components: { MCheckbox, MPopup },\r\n  props: ['employees', 'totalRecords', 'totalPages', 'pageSize', 'pageNumber', 'searchKey'],\r\n  emits: ['hideDetail', 'loadData', 'showToast'],\r\n  data() {\r\n    return {\r\n      pageSelection: [\r\n        {'id': 10, 'selection': '10 bản ghi trên 1 trang'},\r\n        {'id': 20, 'selection':'20 bản ghi trên 1 trang'},\r\n        {'id': 30, 'selection':'30 bản ghi trên 1 trang'},\r\n        {'id': 50, 'selection':'50 bản ghi trên 1 trang'},\r\n        {'id': 100, 'selection':'100 bản ghi trên 1 trang'}\r\n      ],\r\n      tableHeaders: [\r\n        {\r\n          \"caption\": \"MÃ NHÂN VIÊN\",\r\n          \"align\": \"text-left\",\r\n          \"style\": \"min-width: 154px\"\r\n        },\r\n        {\r\n          \"caption\": \"TÊN NHÂN VIÊN\",\r\n          \"align\": \"text-left\",\r\n          \"style\": \"min-width: 212px\"\r\n        },\r\n        {\r\n          \"caption\": \"GIỚI TÍNH\",\r\n          \"align\": \"text-left\",\r\n          \"style\": \"min-width: 115px\"\r\n        },\r\n        {\r\n          \"caption\": \"NGÀY SINH\",\r\n          \"align\": \"text-center\",\r\n          \"style\": \"min-width: 150px\"\r\n        },\r\n        {\r\n          \"caption\": \"SỐ CMND\",\r\n          \"align\": \"text-left\",\r\n          \"style\": \"min-width: 200px\",\r\n          \"title\": \"Số chứng minh nhân dân\"\r\n        },\r\n        {\r\n          \"caption\": \"CHỨC DANH\",\r\n          \"align\": \"text-left\",\r\n          \"style\": \"min-width: 250px\"\r\n        },\r\n        {\r\n          \"caption\": \"TÊN ĐƠN VỊ\",\r\n          \"align\": \"text-left\",\r\n          \"style\": \"min-width: 250px\"\r\n        },\r\n        {\r\n          \"caption\": \"SỐ TÀI KHOẢN\",\r\n          \"align\": \"text-left\",\r\n          \"style\": \"min-width: 150px\"\r\n        },\r\n        {\r\n          \"caption\": \"TÊN NGÂN HÀNG\",\r\n          \"align\": \"text-left\",\r\n          \"style\": \"min-width: 250px\"\r\n        },\r\n        {\r\n          \"caption\": \"CHI NHÁNH NGÂN HÀNG\",\r\n          \"align\": \"text-left\",\r\n          \"style\": \"min-width: 250px; border-right: 0;\"\r\n        },\r\n        {\r\n          \"caption\": \"CHỨC NĂNG\",\r\n          \"align\": \"text-center td-expand\",\r\n          \"style\": \"min-width: 120px\"\r\n        },\r\n      ],\r\n      gender: [\"Nam\", \"Nữ\", \"\"],\r\n      dPageSize: 20,\r\n      isExpand: false,\r\n      expandPosition: {},\r\n      isCheckAll: false,\r\n      isCheck: [],\r\n      employeeSelectedIds: [],\r\n      message: \"\",\r\n      showWarning: false,\r\n      enableMultiAction: false,\r\n      isShowMultiAction: false,\r\n      ids: null,\r\n      pageNumberSelected: 1,\r\n      pageNumberArray: [],\r\n    }\r\n  },\r\n  created(){\r\n    this.DeleteMode = MISAEnum.DeleteMode;\r\n  },\r\n  mounted(){\r\n    // Gán giá trị các checkbox = false\r\n    for (let i = 0; i < this.employees.length; i++) {\r\n      this.isCheck[i] = false;\r\n    }\r\n    this.selectPageNumber(1);\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"employeeSelected\"])\r\n  },\r\n  watch: {\r\n    pageSize: function(value){\r\n      this.dPageSize = value;\r\n    },\r\n    searchKey: function(value){\r\n      this.loadPaging( this.dPageSize, 1, value);\r\n      this.resetAllCheckbox();\r\n    },\r\n    dPageSize: function(value){\r\n      this.loadPaging( value, this.pageNumber, this.searchKey);\r\n      this.resetAllCheckbox();\r\n    },\r\n    pageNumber: function(value){\r\n      this.pageNumberSelected = value;\r\n    },\r\n    pageNumberSelected: function(value){\r\n      this.loadPaging( this.dPageSize, value, this.searchKey);\r\n      this.resetAllCheckbox();\r\n    }\r\n  },\r\n  methods: {\r\n    formatDate,\r\n    ...mapMutations([\"setEmployeeById\"]),\r\n    ...mapActions([\"getEmployeeById\"]),\r\n\r\n    /**\r\n     * Phân trang lại dữ liệu\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    loadPaging(pageSize, pageNumber, searchKey){\r\n      this.$emit(\"loadData\", pageSize, pageNumber, searchKey);\r\n      this.selectPageNumber(pageNumber);\r\n    },\r\n    /**\r\n     * Khi bấm vào mũi tên ở ô chức năng thì hiện tùy chọn các chức năng\r\n     * Author: VQBao - 11/10/2022\r\n     */\r\n    expandFunctionRow(emp){\r\n      if(!this.isExpand){\r\n        this.isExpand = true;\r\n        var pos = event.target.getBoundingClientRect();\r\n        this.expandPosition.top = pos.top + 20;\r\n        this.expandPosition.left = pos.left - 80;\r\n        this.expandPosition.employeeId = emp.EmployeeID;\r\n        this.expandPosition.employeeCode = emp.EmployeeCode;\r\n      } else {\r\n        this.isExpand = false;\r\n        this.expandPosition = {};\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Thực hiện chọn tất cả nhân viên\r\n     * Author: VQBao - 11/10/2022\r\n     */\r\n    checkAllCheckbox(){\r\n      this.employeeSelectedIds = [];\r\n      if(!this.isCheckAll){\r\n        this.isCheckAll = true;\r\n        for (let i = 0; i < this.employees.length; i++) {\r\n          this.isCheck[i] = true;\r\n          this.employeeSelectedIds.push(this.employees[i].EmployeeID);\r\n        }\r\n        this.enableActions(true);\r\n      } else {\r\n        this.resetAllCheckbox();\r\n        this.enableActions(false);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Thực hiện chọn từng nhân viên\r\n     * Author: VQBao - 11/10/2022\r\n     */\r\n    checkCheckbox(employee, index){\r\n      if(!this.isCheck[index]){\r\n        this.isCheck[index] = true;\r\n        this.employeeSelectedIds.push(employee.EmployeeID);\r\n        if(this.employeeSelectedIds.length == this.employees.length){\r\n          this.isCheckAll = true;\r\n        }\r\n        this.enableActions(true);\r\n      } else {\r\n        this.isCheck[index] = false;\r\n        this.isCheckAll = false;\r\n        let id = this.employeeSelectedIds.indexOf(employee.EmployeeID);\r\n        this.employeeSelectedIds.splice(id, 1);\r\n        if(this.employeeSelectedIds.length == 0){\r\n          this.enableActions(false);\r\n        }\r\n      }\r\n    },\r\n    \r\n    /**\r\n     * Đặt lại các checkbox về giá trị false\r\n     * Author: VQBao - 11/10/2022\r\n     */\r\n    resetAllCheckbox(){\r\n      for (let i = 0; i < this.isCheck.length; i++) {\r\n        this.isCheck[i] = false;\r\n      }\r\n      this.employeeSelectedIds = [];\r\n      this.isCheckAll = false;\r\n      this.isShowMultiAction = false;\r\n      this.enableMultiAction = false;\r\n    },\r\n\r\n    /**\r\n     * Khi chọn xóa, hiện popup cảnh báo\r\n     * Author: VQBao - 11/10/2022\r\n     */\r\n    deleteEmployeesOnClick(mode){\r\n      this.showWarning = true;\r\n      if(mode == 1){\r\n        this.ids = this.expandPosition.employeeId;\r\n        this.message = \"Bạn có thực sự muốn xóa Nhân viên <\" + this.expandPosition.employeeCode +\"> không?\"\r\n      } else if(mode == 2){\r\n        this.ids = this.employeeSelectedIds.toString();\r\n        this.message = \"Bạn có thực sự muốn xóa những nhân viên đã chọn không?\"\r\n      }\r\n      this.isExpand = false;\r\n    },\r\n\r\n    /**\r\n     * Hủy xóa nhân viên\r\n     * Author: VQBao - 11/10/2022\r\n     */\r\n    cancelDelete(){\r\n      this.showWarning = false;\r\n      this.message = \"\";\r\n    },\r\n\r\n    /**\r\n     * Gọi api xóa nhân viên\r\n     * Author: VQBao - 11/10/2022\r\n     */\r\n    deleteEmployees(ids){\r\n      document.getElementById(\"loader\").style.display = \"block\";\r\n      var me = this;\r\n      try {\r\n        axios.delete(ConstApi.EmployeeApi, {\r\n          params: {ids: ids}\r\n        })\r\n          .then(() => {\r\n            document.getElementById(\"loader\").style.display = \"none\";\r\n            me.expandPosition = {};\r\n            me.showWarning = false;\r\n            me.loadPaging( 20, 1);\r\n            me.resetAllCheckbox();\r\n            me.$emit(\"showToast\", MISAResource.TOAST.Delete, 'success')\r\n          })\r\n          .catch((error) => {\r\n            document.getElementById(\"loader\").style.display = \"none\";\r\n            me.$emit(\"showToast\", error.response.data.errorMsg, 'error');\r\n          })\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Gọi api lấy dữ liệu nhân viên theo id rồi binding vào form chi tiết\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    async showEmployeeSelectedDetail(id){\r\n      await this.getEmployeeById(id)\r\n      this.$emit(\"hideDetail\", 2, false, this.employeeSelected);\r\n      this.isExpand = false;\r\n    },\r\n\r\n    /**\r\n     * Thực hiện nhân bản nhân viên\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    async duplicateEmployee(){\r\n      await this.getEmployeeById(this.expandPosition.employeeId);\r\n      this.$emit(\"hideDetail\", 3, false, this.employeeSelected);\r\n      this.isExpand = false;\r\n    },\r\n\r\n    /**\r\n     * Thực hiện disable, enable button thực hiện hàng loạt\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    enableActions(isEnable){\r\n      this.enableMultiAction = isEnable;\r\n    },\r\n\r\n    /**\r\n     * Thực hiện đóng mở chức năng mở rộng khi click thực hiện hàng loạt\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    showMultiAction(){\r\n      if(this.enableMultiAction && !this.isShowMultiAction){\r\n        this.isShowMultiAction = true;\r\n      } else if(this.enableMultiAction && this.isShowMultiAction) {\r\n        this.isShowMultiAction = false;\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Thực hiện ẩn các chức năng hàng loạt\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    closeMultiAction(){\r\n      this.isShowMultiAction = false;\r\n    },\r\n\r\n    /**\r\n     * Chuyển tới trang tiếp theo\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    toNextPage(){\r\n      if(this.pageNumberSelected < this.totalPages){\r\n        this.selectPageNumber(this.pageNumberSelected + 1)\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Chuyển tới trang kế trước\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    toPrevPage(){\r\n      if(this.pageNumberSelected > 1){\r\n        this.selectPageNumber(this.pageNumberSelected - 1)\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Chọn trang\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    selectPageNumber(number, index){\r\n      if(this.totalPages < 6 && this.totalPages > 2){\r\n        this.pageNumberSelected = number;\r\n        this.pageNumberArray = [];\r\n        for (let i = 2; i < this.totalPages; i++) {\r\n          this.pageNumberArray.push(i);\r\n        }\r\n      }\r\n      else {\r\n        // Chọn số thứ tự trang\r\n        if(number != '...'){\r\n          if(number == 2 || number == 1){\r\n            this.pageNumberArray= [2, 3, '...'];\r\n          }\r\n          else if(number == this.totalPages){\r\n            this.pageNumberArray= ['...', number - 2, number - 1];\r\n          }\r\n          else if(number == this.totalPages - 1 || number == this.totalPages - 2){\r\n            this.pageNumberArray= ['...', this.totalPages - 2, this.totalPages - 1];\r\n          }\r\n          else {\r\n            this.pageNumberArray= ['...', number, number + 1, '...'];\r\n          }\r\n          this.pageNumberSelected = number;\r\n        }\r\n        // Chọn lại số trang hiển thị để người dùng lựa chọn\r\n        else if(number == '...'){\r\n          var stringArray = this.pageNumberArray.toString();\r\n          var numberSelected = this.pageNumberSelected;\r\n          if(numberSelected == 1 || numberSelected == this.totalPages || numberSelected == 2 || numberSelected == this.totalPages - 1){\r\n            if(stringArray == \"2,3,...\"){\r\n              this.pageNumberArray = ['...', this.totalPages - 2, this.totalPages - 1];\r\n            } else {\r\n              this.pageNumberArray= [2, 3, '...'];\r\n            }\r\n          }\r\n          else {\r\n            if(index < 1 && (this.pageNumberArray[1] == 3 || this.pageNumberArray[1] == 4)){\r\n              this.pageNumberArray = [2, 3, '...'];\r\n            }\r\n            else if(index < 1 && this.pageNumberArray[1] > 4){\r\n              this.pageNumberArray = [ '...', this.pageNumberArray[1] - 2, this.pageNumberArray[1] - 1, '...'];\r\n            }\r\n            else if(index > 2 && this.pageNumberArray[1] == this.totalPages - 4){\r\n              this.pageNumberArray = ['...', this.totalPages - 2, this.totalPages - 1];\r\n            }\r\n            else if(index > 2 && this.pageNumberArray[1] < this.totalPages - 4){\r\n              this.pageNumberArray = [ '...', this.pageNumberArray[1] + 1, this.pageNumberArray[1] + 2, '...'];\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\ntable {\r\n  width: 100%;\r\n  border-spacing: 0;\r\n  box-sizing: border-box;\r\n}\r\n\r\ntable thead th{\r\n  position: sticky;\r\n  top: 0;\r\n  height: 34px;\r\n  background-color: #f4f5f8;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  font-weight: bold;\r\n  z-index: 2;\r\n}\r\n\r\ntable tbody tr {\r\n  height: 44px;\r\n  box-sizing: border-box;\r\n}\r\ntable tr,\r\ntd {\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\ntbody tr:hover {\r\n  background-color: #E5F3FF;\r\n}\r\ntbody tr:hover .td-checkbox, tbody tr:hover .td-expand {\r\n  background-color: #E5F3FF;\r\n}\r\n\r\n.row-selected {\r\n  background-color: #E5F3FF !important;\r\n}\r\n\r\n.row-selected .td-checkbox, .row-selected .td-expand {\r\n  background-color: #E5F3FF;\r\n}\r\n\r\ntable tr td,\r\nth {\r\n  border-bottom: 1px solid #ccc;\r\n  border-right: 1px solid #ccc;\r\n  padding: 0 10px;\r\n}\r\ntbody tr td:last-child,\r\nthead tr th:last-child {\r\n  border-right: none;\r\n}\r\n.content-table {\r\n  padding: 0 0 68px 0;\r\n  height: 100%;\r\n  width: 100%;\r\n  overflow: scroll;\r\n  box-sizing: border-box;\r\n}\r\n.text-left {\r\n    text-align: left;\r\n}\r\n.text-center {\r\n    text-align: center;\r\n}\r\n.table-paging {\r\n    height: 68px;\r\n    width: calc(100% - 50px);\r\n    padding: 0 18px;\r\n    position: absolute;\r\n    left: 20px;\r\n    bottom: 10px;\r\n    background-color: #fff;\r\n    z-index: 10;\r\n    box-sizing: border-box;\r\n}\r\n.paging-selection {\r\n    width: 200px;\r\n}\r\n.paging-nav {\r\n    margin-left: 16px;\r\n    cursor: pointer;\r\n}\r\n.paging-number {\r\n    margin: 0 13px;\r\n}\r\n.number {\r\n    padding: 0.5px 5.5px;\r\n    margin: 0 1.5px;\r\n    cursor: pointer;\r\n}\r\n.paging-total {\r\n    width: 200px;\r\n}\r\n.paging-right {\r\n    position: absolute;\r\n    right: 50px;\r\n}\r\n.td-expand {\r\n  position: sticky !important;\r\n  right: 0;\r\n  border-left: 1px solid #ccc;\r\n  width: 100%;\r\n  background-color: #fff;\r\n}\r\n.selection-expand {\r\n  margin-left: 15px;\r\n  justify-content: center;\r\n  height: 16px;\r\n  width: 16px;\r\n  cursor: pointer;\r\n}\r\n.td-checkbox {\r\n  position: sticky !important;\r\n  left: 0;\r\n  z-index: 3;\r\n  background-color: #fff;\r\n}\r\nth.td-checkbox, th.td-expand {\r\n  background-color: #f4f5f8;\r\n  z-index: 4;\r\n}\r\n\r\n#btnUpdate {\r\n  color: #0075C0;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n}\r\n.flex-expand {\r\n  width: fit-content;\r\n  padding: 0 23px;\r\n  position: relative;\r\n}\r\n\r\n.detail-function-table {\r\n  display: flex;\r\n  flex-direction: column;\r\n  position: fixed;\r\n  z-index: 20;\r\n  background-color: #fff;\r\n  border-radius: 2px;\r\n  border: 1px solid #babec5;\r\n  top: 200px;\r\n}\r\n.detail-btn {\r\n  padding: 5px 10px 5px;\r\n  cursor: pointer !important;\r\n  height: 20px;\r\n}\r\n.detail-btn:hover {\r\n  background-color: #e8e9ec;\r\n  color: #2ca01c;\r\n}\r\n\r\n.noti-popup {\r\n  margin-top: 32px;\r\n  display: flex;\r\n  width: 380px;\r\n  height: 80px;\r\n  border-bottom: 1px solid #b8bcc3;\r\n}\r\n.noti-icon {\r\n  width: 48px;\r\n  height: 48px;\r\n  justify-content: center;\r\n}\r\n.noti-text {\r\n  padding: 12px 0 0 16px;\r\n}\r\n.content-control {\r\n  padding: 20px 0;\r\n  position: relative;\r\n}\r\n.control-right {\r\n  position: absolute;\r\n  top: 20px;\r\n  right: -10px;\r\n}\r\n\r\n.multi-action {\r\n  position: absolute;\r\n  top: -52px;\r\n  left: 8px;\r\n}\r\n\r\n#btnMultiDelete {\r\n    display: flex;\r\n    align-items: center;\r\n    position: absolute;\r\n    width: 100px;\r\n    height: 34px;\r\n    box-sizing: border-box;\r\n    border: 1px solid #babec5;\r\n    border-radius: 2px;\r\n    background-color: #fff;\r\n    padding: 2px 12px;\r\n    z-index: 20;\r\n    right: 0;\r\n    top: 38px;\r\n    cursor: pointer;\r\n}\r\n#btnMultiDelete:hover {\r\n    background-color: #eceef1;\r\n}\r\n\r\n.disable-text {\r\n  color: rgb(150, 150, 150) !important;\r\n}\r\n.number-border {\r\n  border: 1px solid #3b3c3f;\r\n  fon\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}