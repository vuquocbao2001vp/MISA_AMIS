{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-24366d6c\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"header flex\"\n};\n\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"header-title\"\n}, \"Nhân viên\", -1\n/* HOISTED */\n));\n\nconst _hoisted_3 = {\n  class: \"header-right\"\n};\nconst _hoisted_4 = {\n  class: \"toolbar flex\"\n};\nconst _hoisted_5 = {\n  class: \"toolbar-right flex\"\n};\nconst _hoisted_6 = {\n  class: \"input-search\"\n};\n\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"icon-textbox flex\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"icon-search\"\n})], -1\n/* HOISTED */\n));\n\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"icon-reload\",\n  title: \"Lấy lại dữ liệu\"\n}, null, -1\n/* HOISTED */\n));\n\nconst _hoisted_9 = [_hoisted_8];\n\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"icon-export\",\n  title: \"Xuất ra Excel\"\n}, null, -1\n/* HOISTED */\n));\n\nconst _hoisted_11 = [_hoisted_10];\n\nconst _hoisted_12 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"toolbar-icon flex\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"icon-setting\",\n  title: \"Tùy chỉnh giao diện\"\n})], -1\n/* HOISTED */\n));\n\nconst _hoisted_13 = {\n  class: \"grid\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_m_button = _resolveComponent(\"m-button\");\n\n  const _component_DxTextBox = _resolveComponent(\"DxTextBox\");\n\n  const _component_m_table = _resolveComponent(\"m-table\");\n\n  const _component_EmployeeDetail = _resolveComponent(\"EmployeeDetail\");\n\n  const _component_m_toast = _resolveComponent(\"m-toast\");\n\n  const _component_m_loader = _resolveComponent(\"m-loader\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", {\n    onClick: _cache[0] || (_cache[0] = $event => $options.hideDetail(_ctx.SAVE_MODE.Add, false, {}))\n  }, [_createVNode(_component_m_button, {\n    buttonName: \"Thêm mới nhân viên\",\n    buttonType: \"green\"\n  })])])]), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_DxTextBox, {\n    class: \"control-textbox\",\n    placeholder: \"Tìm theo mã, tên nhân viên\",\n    \"value-change-event\": \"keyup\",\n    onValueChanged: $options.getTextSearch\n  }, null, 8\n  /* PROPS */\n  , [\"onValueChanged\"]), _hoisted_7]), _createElementVNode(\"div\", {\n    class: \"toolbar-icon flex\",\n    onClick: _cache[1] || (_cache[1] = $event => _ctx.getEmployeePaging({\n      pageSize: _ctx.employeePaging.pageSize,\n      pageNumber: 1,\n      searchKey: $data.searchKey\n    }))\n  }, _hoisted_9), _createElementVNode(\"div\", {\n    class: \"toolbar-icon flex\",\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.exportExcelFile && $options.exportExcelFile(...args))\n  }, _hoisted_11), _hoisted_12])]), _createElementVNode(\"div\", _hoisted_13, [_createVNode(_component_m_table, {\n    employees: _ctx.employees,\n    searchKey: $data.searchKey,\n    totalRecords: _ctx.employeePaging.totalRecords,\n    totalPages: _ctx.employeePaging.totalPages,\n    pageSize: _ctx.employeePaging.pageSize,\n    pageNumber: _ctx.employeePaging.pageNumber,\n    onHideDetail: $options.hideDetail,\n    onLoadData: $options.loadData,\n    onShowToast: $options.showToast\n  }, null, 8\n  /* PROPS */\n  , [\"employees\", \"searchKey\", \"totalRecords\", \"totalPages\", \"pageSize\", \"pageNumber\", \"onHideDetail\", \"onLoadData\", \"onShowToast\"])]), _createVNode(_component_EmployeeDetail, {\n    isHide: $data.isHideDetail,\n    onHideDetail: $options.hideDetail,\n    onLoadData: $options.loadData,\n    onShowToast: $options.showToast,\n    saveMode: $data.saveMode,\n    employeeSelected: $data.employeeSelected\n  }, null, 8\n  /* PROPS */\n  , [\"isHide\", \"onHideDetail\", \"onLoadData\", \"onShowToast\", \"saveMode\", \"employeeSelected\"]), _createVNode(_component_m_toast, {\n    isHideToast: $data.isHideToast,\n    text: $data.toastText,\n    type: $data.toastType\n  }, null, 8\n  /* PROPS */\n  , [\"isHideToast\", \"text\", \"type\"]), _createVNode(_component_m_loader)], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","title","_hoisted_8","_hoisted_10","_hoisted_2","onClick","$options","_ctx","Add","_createVNode","_component_m_button","buttonName","buttonType","_component_DxTextBox","placeholder","onValueChanged","_hoisted_7","pageSize","pageNumber","searchKey","$data","_hoisted_12","_component_m_table","employees","totalRecords","totalPages","onHideDetail","onLoadData","onShowToast","_component_EmployeeDetail","isHide","saveMode","employeeSelected","_component_m_toast","isHideToast","text","type","_component_m_loader"],"sourceRoot":"","sources":["E:\\MisaProject\\MISA_AMIS\\MISA_AMIS_FE\\misa-amis\\src\\pages\\Employee\\PageEmployee.vue"],"sourcesContent":["<template>\r\n  <div class=\"header flex\">\r\n    <div class=\"header-title\">Nhân viên</div>\r\n    <div class=\"header-right\">\r\n        <div @click=\"hideDetail(SAVE_MODE.Add, false, {})\"><m-button buttonName=\"Thêm mới nhân viên\" buttonType=\"green\"></m-button></div>\r\n    </div>\r\n  </div>\r\n  <div class=\"toolbar flex\">\r\n    <div class=\"toolbar-right flex\">\r\n        <div class=\"input-search\">\r\n            <DxTextBox \r\n                class=\"control-textbox\"\r\n                placeholder=\"Tìm theo mã, tên nhân viên\"\r\n                value-change-event=\"keyup\"\r\n                @value-changed=\"getTextSearch\"\r\n            />\r\n            <div class=\"icon-textbox flex\"><div class=\"icon-search\"></div></div>\r\n        </div>\r\n        <div class=\"toolbar-icon flex\" @click=\"getEmployeePaging({pageSize: employeePaging.pageSize, pageNumber: 1, searchKey: searchKey})\"><div class=\"icon-reload\" title=\"Lấy lại dữ liệu\"></div></div>\r\n        <div class=\"toolbar-icon flex\" @click=\"exportExcelFile\"><div class=\"icon-export\" title=\"Xuất ra Excel\"></div></div>\r\n        <div class=\"toolbar-icon flex\"><div class=\"icon-setting\" title=\"Tùy chỉnh giao diện\"></div></div>\r\n    </div>\r\n  </div>\r\n  <div class=\"grid\">\r\n    <m-table\r\n        :employees=\"employees\"\r\n        :searchKey=\"searchKey\"\r\n        :totalRecords=\"employeePaging.totalRecords\"\r\n        :totalPages=\"employeePaging.totalPages\"\r\n        :pageSize=\"employeePaging.pageSize\"\r\n        :pageNumber=\"employeePaging.pageNumber\"\r\n        @hideDetail=\"hideDetail\"\r\n        @loadData=\"loadData\"\r\n        @showToast=\"showToast\"\r\n    >\r\n    </m-table>\r\n  </div>\r\n  <EmployeeDetail\r\n    :isHide=\"isHideDetail\"\r\n    @hideDetail=\"hideDetail\"\r\n    @loadData=\"loadData\"\r\n    @showToast=\"showToast\"\r\n    :saveMode=\"saveMode\"\r\n    :employeeSelected=\"employeeSelected\"\r\n  />\r\n  <m-toast :isHideToast=\"isHideToast\" :text=\"toastText\" :type=\"toastType\"></m-toast>\r\n  <m-loader ></m-loader>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport ConstApi from '../../constants/api/constApi'\r\nimport ConstEndpoint from '../../constants/api/constEndpoint'\r\nimport MTable from '@/components/base/table/MTable.vue'\r\nimport EmployeeDetail from './EmployeeDetail.vue'\r\nimport { mapMutations, mapActions, mapGetters } from \"vuex\";\r\nimport MISAResource from '@/constants/resources/MISAResource'\r\n\r\nexport default {\r\n  components: { MTable, EmployeeDetail},\r\n  data() {\r\n    return {\r\n      isHideDetail: true,\r\n      timeout: null,\r\n      searchKey: \"\",\r\n      saveMode: null,\r\n      employeeSelected: {},\r\n      isHideToast: true,\r\n      toastText: \"\",\r\n      toastType: \"\",\r\n    }\r\n  },\r\n  mounted(){\r\n    this.SAVE_MODE = MISAResource.SAVE_MODE;\r\n    this.getEmployeePaging({pageSize: 20, pageNumber: 1});\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"employees\", \"employeePaging\"])\r\n  },\r\n  methods: {\r\n    ...mapMutations([\"setEmployeePaging\"]),\r\n    ...mapActions([\"getEmployeePaging\"]),\r\n\r\n    /**\r\n     * Ẩn hiện dialog chi tiết nhân viên\r\n     * Author: VQBao - 11/10/2022\r\n     */\r\n    hideDetail(mode, isHide, emp){\r\n      this.isHideDetail = isHide;\r\n      this.saveMode = mode;\r\n      this.employeeSelected = emp;\r\n    },\r\n\r\n    /**\r\n     * Lấy ra từ khóa tìm kiếm sau khi nhập xong input\r\n     * Author; VQBao - 11/10/2022\r\n     */\r\n    getTextSearch(data) {\r\n      clearTimeout(this.timeout);\r\n      var self = this;\r\n      self.timeout = setTimeout(function () {\r\n        self.searchKey = data.value;\r\n      }, 500);\r\n    },\r\n\r\n    /**\r\n     * Load lại dữ liệu\r\n     * Author; VQBao - 11/10/2022\r\n     */\r\n    loadData(pageSize, pageNumber, searchKey){\r\n      this.getEmployeePaging({pageSize: pageSize, pageNumber: pageNumber, searchKey: searchKey});\r\n    },\r\n\r\n    /**\r\n     * Hiện toast mesage\r\n     * Author: VQBao - 11/10/2022\r\n     */\r\n    showToast(text, type) {\r\n      var me = this;\r\n      me.toastType = type;\r\n      me.toastText = text;\r\n      me.isHideToast = false;\r\n      setTimeout(function () {\r\n        me.isHideToast = true;\r\n      }, 3000);\r\n    },\r\n\r\n    /**\r\n     * Xuất khẩu nhân viên\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    exportExcelFile(){\r\n      document.getElementById(\"loader\").style.display = \"block\";\r\n      try {\r\n        axios({\r\n          url: ConstApi.EmployeeApi + ConstEndpoint.EmployeeExcel,\r\n          method: \"GET\",\r\n          responseType: \"blob\",\r\n        }).then((response) => {\r\n          var fileURL = window.URL.createObjectURL(new Blob([response.data]));\r\n          var fileLink = document.createElement(\"a\");\r\n\r\n          fileLink.href = fileURL;\r\n          fileLink.setAttribute(\"download\", \"Danh_sach_nhan_vien.xlsx\");\r\n          document.body.appendChild(fileLink);\r\n          fileLink.click();\r\n          document.getElementById(\"loader\").style.display = \"none\";\r\n        })\r\n        .catch((error) => {\r\n          document.getElementById(\"loader\").style.display = \"none\";\r\n          this.showToast(error.response.data.errorMsg, 'error');\r\n        })\r\n      } catch (error) {\r\n        document.getElementById(\"loader\").style.display = \"none\";\r\n        console.log(error);\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.header {\r\n    padding: 24px 0;\r\n}\r\n.header-title {\r\n    font-size: 24px;\r\n    font-weight: 700;\r\n    color: #111;\r\n    font-family: Misa Font Bold;\r\n    min-width: 125px;\r\n}\r\n.header-right {\r\n  position: absolute;\r\n  right: 10px;\r\n}\r\n.toolbar {\r\n    padding: 16px 16px 16px 4px;\r\n    height: 68px;\r\n    background-color: #fff;\r\n    position: relative;\r\n    box-sizing: border-box;\r\n}\r\n.input-search {\r\n    width: 240px;\r\n    height: 32px;\r\n    box-sizing: border-box;\r\n    position: relative;\r\n    margin-right: 10px;\r\n}\r\n.control-textbox {\r\n    padding-right: 28px;\r\n    width: 100% !important;\r\n}\r\n.icon-textbox {\r\n  position: absolute;\r\n  content: \"\";\r\n  top: 8px;\r\n  right: 10px;\r\n  width: 18px;\r\n  height: 18px;\r\n  z-index: 1;\r\n  justify-content: center;\r\n}\r\n.toolbar-icon {\r\n    width: 24px;\r\n    height: 24px;\r\n    justify-content: center;\r\n    cursor: pointer;\r\n    margin: 0 6px;\r\n}\r\n.icon-reload {\r\n    background: url(./../../assets/img/Sprites.64af8f61.svg) no-repeat -425px -201px;\r\n\twidth: 21px;\r\n\theight: 23px;\r\n}\r\n.icon-reload:hover {\r\n    background: url(./../../assets/img/Sprites.64af8f61.svg) no-repeat -1098px -90px;\r\n\twidth: 20px;\r\n\theight: 21px;\r\n}\r\n.icon-export {\r\n    background: url(./../../assets/img/Sprites.64af8f61.svg) no-repeat -705px -202px;\r\n\twidth: 23px;\r\n\theight: 20px;\r\n}\r\n.icon-export:hover {\r\n    background: url(./../../assets/img/Sprites.64af8f61.svg) no-repeat -1265px -90px;\r\n\twidth: 23px;\r\n\theight: 20px;\r\n}\r\n.icon-setting {\r\n    background: url(./../../assets/img/Sprites.64af8f61.svg) no-repeat -90px -201px;\r\n\twidth: 20px;\r\n\theight: 22px;\r\n}\r\n.icon-setting:hover {\r\n    background: url(./../../assets/img/Sprites.64af8f61.svg) no-repeat -33px -144px;\r\n\twidth: 23px;\r\n\theight: 24px;\r\n}\r\n.toolbar-right {\r\n    justify-content: center;\r\n    position: absolute;\r\n    right: 16px;\r\n}\r\n.grid {\r\n    background-color: #fff;\r\n    height: calc(100vh - 48px - 84px - 68px);\r\n    box-sizing: border-box;\r\n    padding: 1px 30px 0px 20px;\r\n    position: relative;\r\n}\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}