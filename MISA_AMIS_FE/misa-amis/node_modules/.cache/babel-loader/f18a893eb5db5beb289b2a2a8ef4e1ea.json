{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport ConstApi from '../../constants/api/constApi';\nimport ConstEndpoint from '../../constants/api/constEndpoint';\nimport compareTwoObjects from '../../constants/extensions/compareTwoObjects';\nimport MPopup from \"@/components/base/popup/MPopup.vue\";\nimport MCheckbox from \"@/components/base/checkbox/MCheckbox.vue\";\nimport MRadioCheckbox from '@/components/base/checkbox/MRadioCheckbox.vue';\nimport MButton from '@/components/base/button/MButton.vue';\nimport { mapMutations, mapActions, mapGetters } from \"vuex\";\nimport MISAResource from '../../constants/resources/MISAResource';\nimport MISAEnum from '@/constants/enums/MISAEnum';\nexport default {\n  components: {\n    MPopup,\n    MCheckbox,\n    MRadioCheckbox,\n    MButton\n  },\n  props: ['isHide', 'saveMode', 'employeeSelected'],\n\n  data() {\n    return {\n      employee: {},\n      isCustomer: false,\n      isGroup: false,\n      isShowError: [],\n      errorText: [],\n      isValid: true,\n      elementFocus: null,\n      isSuccess: false,\n      addMode: null,\n      showErrorPopup: false,\n      showInfoPopup: false,\n      showDuplicatePopup: false,\n      dateOfBirth: null,\n      dateOfICIC: null,\n      oldEmployee: {},\n      axiosMethod: null,\n      toastText: null\n    };\n  },\n\n  computed: { ...mapGetters([\"organizations\", \"positions\"])\n  },\n\n  mounted() {\n    this.Gender = MISAEnum.Gender;\n    this.POP_UP = MISAResource.POP_UP;\n    this.getOrganizations();\n    this.getPositions(); // tạo sự kiện sử dụng phím tắt\n\n    document.addEventListener(\"keydown\", this.doShortcut);\n  },\n\n  beforeUnmount() {\n    // hủy sự kiện sử dụng phím tắt\n    document.removeEventListener(\"keydown\", this.doShortcut);\n  },\n\n  watch: {\n    // Khi nhân viên được chọn thay đổi, gán giá trị vào data employee\n    employeeSelected: function (value) {\n      this.employee = value;\n      this.oldEmployee = { ...value\n      };\n\n      if (value) {\n        this.dateOfBirth = value.DateOfBirth;\n        this.dateOfICIC = value.DateOfIssuanceCIC;\n      }\n    },\n    // Mỗi khi mở popup detail, nếu là thêm mới hoặc nhân bản, lấy mã nhân viên mới\n    isHide: function (value) {\n      if (!value && this.saveMode == MISAResource.SAVE_MODE.Add) {\n        this.getNewEmployeeCode();\n        this.employee.Gender = MISAEnum.Gender.Male;\n      } else if (!value && this.saveMode == MISAResource.SAVE_MODE.Duplicate) {\n        this.getNewEmployeeCode();\n      }\n\n      this.errorText = [], this.isShowError = [], this.isSuccess = false;\n    },\n    // Gán giá trị của prop saveMode vào data addMode\n    saveMode: function (value) {\n      this.addMode = value;\n    }\n  },\n  methods: {\n    // Hàm kiểm tra thay đổi dữ liệu hay chưa\n    compareTwoObjects,\n    ...mapMutations([\"setOrganizations\", \"setPositions\"]),\n    ...mapActions([\"getOrganizations\", \"getPositions\"]),\n\n    /**\r\n     * Sử dụng phím tắt để thực hiện nhanh các chức năng\r\n     * Author: VQBao - 23/10/2022\r\n     */\n    doShortcut(e) {\n      // Nếu key = ESC, đóng detail\n      if (e.keyCode === 27) {\n        this.hideDialogDetail();\n      } // Khi sử dụng Ctrl + S thì thực hiện cất dữ liệu\n      else if (e.keyCode === 83 && e.ctrlKey && !e.shiftKey) {\n        this.saveOnClick();\n        e.preventDefault();\n      } // Khi sử dụng Ctrl + Shift + S thì thực hiện cất và thêm mới\n      else if (e.keyCode === 83 && e.ctrlKey && e.shiftKey) {\n        this.refillFormOnClick();\n        e.preventDefault();\n      }\n    },\n\n    /**\r\n     * Khi click tắt form thông tin chi tiết, hiện popup info\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    hideDialogDetail() {\n      this.employee.DateOfBirth = this.dateOfBirth;\n      this.employee.DateOfIssuanceCIC = this.dateOfICIC; // So sánh object nhân viên cũ và mới, nếu thay đổi thì hiện popup thay đổi dữ liệu\n\n      if (!this.compareTwoObjects(this.oldEmployee, this.employee)) {\n        this.showInfoPopup = true;\n      } else {\n        this.$emit(\"hideDetail\", null, true);\n      }\n    },\n\n    /**\r\n     * Khi chọn không ở popup info, tắt form thông tin chi tiết\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    cancelSaveAction() {\n      this.showInfoPopup = false;\n      this.$emit(\"hideDetail\", null, true);\n    },\n\n    /**\r\n     * Khi chọn có ở popup info, tắt popup rồi thực hiện cất\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    confirmSaveAction() {\n      this.showInfoPopup = false;\n      this.saveOnClick();\n    },\n\n    /**\r\n     * focus vào ô input đầu tiên mỗi khi mở form chi tiết\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    onInitialized: function (e) {\n      this.elementFocus = e;\n      setTimeout(function () {\n        e.component.focus();\n      }, 0);\n    },\n\n    /**\r\n     * Khi bấm cất, thêm nhân viên rồi tắt form\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    async saveOnClick() {\n      await this.addEmployee();\n\n      if (this.isSuccess) {\n        this.$emit(\"hideDetail\", null, true);\n      }\n    },\n\n    /**\r\n     * Gọi api thêm, sửa nhân viên\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    async addEmployee() {\n      // var axiosMethod = \"\";\n      // var toastText = \"\";\n      var me = this; // var newGuid = this.$uuid.v4();\n      // if(this.addMode == MISAResource.SAVE_MODE.Add){\n      //   me.employee.EmployeeID = newGuid;\n      //   axiosMethod = 'post';\n      //   toastText = MISAResource.TOAST.Add;\n      // } else if(this.addMode == MISAResource.SAVE_MODE.Edit){\n      //   axiosMethod = 'put';\n      //   toastText = MISAResource.TOAST.Edit;\n      // } else if(this.addMode == MISAResource.SAVE_MODE.Duplicate){\n      //   me.employee.EmployeeID = newGuid;\n      //   axiosMethod = 'post';\n      //   toastText = MISAResource.TOAST.Duplicate;\n      // }\n\n      me.prepareToAddEmployee();\n      me.validateEmployee();\n\n      if (me.isValid) {\n        var list = [];\n        list.push(me.employee);\n\n        try {\n          await axios({\n            method: this.axiosMethod,\n            url: ConstApi.EmployeeApi,\n            data: list\n          }).then(() => {\n            me.isSuccess = true;\n            me.employee = {};\n            me.$emit(\"loadData\", 20, 1, \"\");\n            me.$emit(\"showToast\", me.toastText, 'success');\n            me.getNewEmployeeCode();\n            me.addMode = MISAResource.SAVE_MODE.Add;\n          }).catch(error => {\n            me.$emit(\"hideLoader\", true);\n\n            if (error.response.data.errorMsg[0] == MISAResource.ERROR.DuplicatedCodeResponse) {\n              let el = document.getElementById(\"employeeCodeInput\");\n              el.classList.add(\"check-border\");\n              me.errorText[0] = MISAResource.ERROR.DuplicatedCode;\n              me.showDuplicatePopup = true;\n            } else {\n              me.$emit(\"showToast\", error.response.data.errorMsg, 'error');\n              me.$emit(\"hideDetail\", null, true);\n            }\n          });\n        } catch (error) {\n          me.$emit(\"hideLoader\", true);\n          console.log(error);\n        }\n      }\n    },\n\n    prepareToAddEmployee() {\n      var newGuid = this.$uuid.v4();\n\n      if (this.addMode == MISAResource.SAVE_MODE.Add) {\n        this.employee.EmployeeID = newGuid;\n        this.axiosMethod = 'post';\n        this.toastText = MISAResource.TOAST.Add;\n      } else if (this.addMode == MISAResource.SAVE_MODE.Edit) {\n        this.axiosMethod = 'put';\n        this.toastText = MISAResource.TOAST.Edit;\n      } else if (this.addMode == MISAResource.SAVE_MODE.Duplicate) {\n        this.employee.EmployeeID = newGuid;\n        this.axiosMethod = 'post';\n        this.toastText = MISAResource.TOAST.Duplicate;\n      }\n    },\n\n    /**\r\n     * Khi bấm cất và thêm, thực hiên cất rồi reset form để tiếp tục thêm mới\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    async refillFormOnClick() {\n      await this.addEmployee();\n      this.isSuccess = false;\n      this.onInitialized(this.elementFocus);\n    },\n\n    /**\r\n     * Check các check box là khách hàng và là nhà cung cấp, 1-true, 0-false\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    checkCheckbox(check) {\n      if (check == 1) {\n        if (this.employee.IsCustomer == 1) {\n          this.employee.IsCustomer = 0;\n        } else {\n          this.employee.IsCustomer = 1;\n        }\n      } else if (check == 2) {\n        if (this.employee.IsGroup == 1) {\n          this.employee.IsGroup = 0;\n        } else {\n          this.employee.IsGroup = 1;\n        }\n      }\n    },\n\n    /**\r\n     * Check radio giới tính\r\n     * 1: Nam, 2: Nữ\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    checkRadio(check) {\n      this.employee.Gender = check;\n    },\n\n    /**\r\n     * Thực hiện validate nhân viên khi bấm cất\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    validateEmployee() {\n      this.isValid = true;\n      this.validateEmployeeCode();\n      this.validateFullName();\n      this.validateOrganization();\n      this.validateDateOfBirth();\n      this.validateDateOfIssuanceCIC();\n      this.validateEmail();\n\n      for (let i = 0; i < this.errorText.length; i++) {\n        if (this.errorText[i]) {\n          this.isValid = false;\n          break;\n        }\n      }\n\n      if (!this.isValid) {\n        this.showErrorPopup = true;\n      }\n    },\n\n    /**\r\n     * Validate mã nhân viên\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    validateEmployeeCode() {\n      this.validateEmpty(\"employeeCodeInput\", this.employee.EmployeeCode, 0, MISAResource.ERROR.EmptyCode);\n    },\n\n    /**\r\n     * Validate tên nhân viên\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    validateFullName() {\n      this.validateEmpty(\"fullNameInput\", this.employee.FullName, 1, MISAResource.ERROR.EmptyFullName);\n    },\n\n    /**\r\n     * Validate tên đơn vị\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    validateOrganization() {\n      this.validateEmpty(\"organizationInput\", this.employee.OrganizationID, 2, MISAResource.ERROR.EmptyOrganization);\n    },\n\n    /**\r\n     * Check các trường thông tin trống\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    validateEmpty(elementId, value, errorIndex, error) {\n      let el = document.getElementById(elementId);\n\n      if (!value) {\n        el.classList.add(\"check-border\");\n        this.errorText[errorIndex] = error;\n      } else {\n        el.classList.remove(\"check-border\");\n        this.errorText[errorIndex] = \"\";\n      }\n    },\n\n    /**\r\n     * Validate email đúng định dạng\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    validateEmail() {\n      let el = document.getElementById(\"emailInput\");\n\n      if (this.employee.Email) {\n        var emailFormat = /^([a-zA-Z0-9_\\-.]+)@([a-zA-Z0-9_\\-.]+)\\.([a-zA-Z]{2,5})$/;\n\n        if (!emailFormat.test(this.employee.Email)) {\n          el.classList.add(\"check-border\");\n          this.errorText[5] = MISAResource.ERROR.ValidEmail;\n        } else {\n          el.classList.remove(\"check-border\");\n          this.errorText[5] = \"\";\n        }\n      } else {\n        el.classList.remove(\"check-border\");\n        this.errorText[5] = \"\";\n      }\n    },\n\n    /**\r\n     * Validate ngày sinh lớn hơn ngày hiện tại\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    validateDateOfBirth() {\n      this.validateDate(\"dobInput\", this.dateOfBirth, 3, MISAResource.ERROR.ValidDateOfBirth);\n    },\n\n    /**\r\n     * Validate ngày cấp không lớn hơn ngày hiện tại\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    validateDateOfIssuanceCIC() {\n      this.validateDate(\"doiInput\", this.dateOfICIC, 4, MISAResource.ERROR.ValidDateOfIssuanceCIC);\n    },\n\n    /**\r\n     * Kiểm tra ngày chọn có lớn hơn ngày hiện tại hay không\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    validateDate(elementId, value, errorIndex, error) {\n      let el = document.getElementById(elementId);\n\n      if (value) {\n        let today = new Date();\n        today = this.convertDate(today);\n        if (errorIndex == 3) this.employee.DateOfBirth = this.convertDate(value);else if (errorIndex == 4) this.employee.DateOfIssuanceCIC = this.convertDate(value);\n\n        if (this.convertDate(value) > today) {\n          el.classList.add(\"check-border\");\n          this.errorText[errorIndex] = error;\n        } else {\n          el.classList.remove(\"check-border\");\n          this.errorText[errorIndex] = \"\";\n        }\n      } else {\n        el.classList.remove(\"check-border\");\n        this.errorText[errorIndex] = \"\";\n      }\n    },\n\n    /**\r\n     * Lấy mã nhân viên mới\r\n     * Author: VQBao - 11/10/2022\r\n     */\n    getNewEmployeeCode() {\n      var me = this;\n\n      try {\n        axios.get(ConstApi.EmployeeApi + ConstEndpoint.NewEmployeeCode).then(response => {\n          if (!me.isHide) {\n            me.employee.EmployeeCode = response.data;\n\n            if (me.addMode == MISAResource.SAVE_MODE.Add) {\n              me.employee.Gender = MISAEnum.Gender.Male;\n            }\n          }\n        }).catch(error => {\n          me.$emit(\"showToast\", error.response.data.errorMsg, 'error');\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    },\n\n    /**\r\n     * Đóng các popup\r\n     * Author: VQBao - 11/10/2022\r\n     */\n    closePopup() {\n      this.showErrorPopup = false;\n      this.showInfoPopup = false;\n      this.showDuplicatePopup = false;\n      this.onInitialized(this.elementFocus);\n    },\n\n    /**\r\n     * Chuyển date về cùng định dạng\r\n     * Author: VQBao - 11/10/2022\r\n     */\n    convertDate(date) {\n      let newDate = new Date(date);\n\n      if (date && newDate instanceof Date && !isNaN(newDate.valueOf())) {\n        let _day = newDate.getDate() + 1;\n\n        let _month = newDate.getMonth();\n\n        let _year = newDate.getFullYear();\n\n        newDate = new Date(_year, _month, _day);\n      }\n\n      return newDate;\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","ConstApi","ConstEndpoint","compareTwoObjects","MPopup","MCheckbox","MRadioCheckbox","MButton","mapMutations","mapActions","mapGetters","MISAResource","MISAEnum","components","props","data","employee","isCustomer","isGroup","isShowError","errorText","isValid","elementFocus","isSuccess","addMode","showErrorPopup","showInfoPopup","showDuplicatePopup","dateOfBirth","dateOfICIC","oldEmployee","axiosMethod","toastText","computed","mounted","Gender","POP_UP","getOrganizations","getPositions","document","addEventListener","doShortcut","beforeUnmount","removeEventListener","watch","employeeSelected","value","DateOfBirth","DateOfIssuanceCIC","isHide","saveMode","SAVE_MODE","Add","getNewEmployeeCode","Male","Duplicate","methods","e","keyCode","hideDialogDetail","ctrlKey","shiftKey","saveOnClick","preventDefault","refillFormOnClick","$emit","cancelSaveAction","confirmSaveAction","onInitialized","setTimeout","component","focus","addEmployee","me","prepareToAddEmployee","validateEmployee","list","push","method","url","EmployeeApi","then","catch","error","response","errorMsg","ERROR","DuplicatedCodeResponse","el","getElementById","classList","add","DuplicatedCode","console","log","newGuid","$uuid","v4","EmployeeID","TOAST","Edit","checkCheckbox","check","IsCustomer","IsGroup","checkRadio","validateEmployeeCode","validateFullName","validateOrganization","validateDateOfBirth","validateDateOfIssuanceCIC","validateEmail","i","length","validateEmpty","EmployeeCode","EmptyCode","FullName","EmptyFullName","OrganizationID","EmptyOrganization","elementId","errorIndex","remove","Email","emailFormat","test","ValidEmail","validateDate","ValidDateOfBirth","ValidDateOfIssuanceCIC","today","Date","convertDate","get","NewEmployeeCode","closePopup","date","newDate","isNaN","valueOf","_day","getDate","_month","getMonth","_year","getFullYear"],"sourceRoot":"","sources":["E:\\MisaProject\\MISA_AMIS\\MISA_AMIS_FE\\misa-amis\\src\\pages\\Employee\\EmployeeDetail.vue"],"sourcesContent":["<template>\r\n<div v-if=\"isHide == false\" id=\"employeeDetail\" :class=\"{'hide': isHide}\">\r\n  <m-popup>\r\n    <template #header>\r\n      <div class=\"header flex\">\r\n        <div class=\"header-title\">Thông tin nhân viên</div>\r\n        <div @click=\"checkCheckbox(1)\" class=\"header-checkbox\"><m-checkbox :isCheck=\"employee.IsCustomer\" title=\"Là khách hàng\" /></div>\r\n        <div @click=\"checkCheckbox(2)\" class=\"header-checkbox\"><m-checkbox :isCheck=\"employee.IsGroup\" title=\"Là nhà cung cấp\" /></div>\r\n      </div>\r\n      <div class=\"header-right flex\">\r\n        <div class=\"header-icon flex\"><div class=\"icon-help\" title=\"Giúp (F1)\"></div></div>\r\n        <div class=\"header-icon flex\" @click=\"hideDialogDetail\" @keydown.esc=\"doShortcut\"><div class=\"icon-close\" title=\"Đóng (Esc)\"></div></div>\r\n      </div>\r\n    </template>\r\n    <template #content>\r\n      <div class=\"flex\">\r\n        <div class=\"content-left\">\r\n          <div class=\"content-left-row flex\">\r\n            <div class=\"item\">\r\n              <div class=\"item-title\">\r\n                Mã <span class=\"require-input\">*</span>\r\n              </div>\r\n              <div @mouseover=\"isShowError[0] = true\" @mouseleave=\"isShowError[0] = false\" id=\"employeeCodeInput\" class=\"item-input\" style=\"width: 150px; margin-right: 6px\">\r\n                <DxTextBox\r\n                  v-model=\"employee.EmployeeCode\"\r\n                  :on-focus-out=\"validateEmployeeCode\"\r\n                  :on-initialized=\"onInitialized\"\r\n                  value-change-event=\"keyup\"\r\n                  max-length=\"20\"\r\n                />\r\n                <div v-if=\"errorText[0]\" class=\"validate-error\" v-show=\"isShowError[0]\">\r\n                  <div class=\"arrow\"></div>\r\n                  <div class=\"error-text\">{{errorText[0]}}</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"item\">\r\n              <div class=\"item-title\">\r\n                Tên <span class=\"require-input\">*</span>\r\n              </div>\r\n              <div @mouseover=\"isShowError[1] = true\" @mouseleave=\"isShowError[1] = false\" id=\"fullNameInput\" class=\"item-input\" style=\"width: 235px\">\r\n                <DxTextBox\r\n                  v-model=\"employee.FullName\"\r\n                  :on-focus-out=\"validateFullName\"\r\n                  max-length=\"100\"\r\n                  value-change-event=\"keyup\"\r\n                />\r\n                <div v-if=\"errorText[1]\" class=\"validate-error\" v-show=\"isShowError[1]\">\r\n                  <div class=\"arrow\"></div>\r\n                  <div class=\"error-text\">{{errorText[1]}}</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"content-left-row flex\">\r\n            <div class=\"item\">\r\n              <div class=\"item-title\">\r\n                Đơn vị <span class=\"require-input\">*</span>\r\n              </div>\r\n              <div @mouseover=\"isShowError[2] = true\" @mouseleave=\"isShowError[2] = false\" id=\"organizationInput\" class=\"item-input custom\" style=\"width: 392px\">\r\n                <DxSelectBox\r\n                  :search-enabled=\"true\"\r\n                  v-model:value=\"employee.OrganizationID\"\r\n                  :on-focus-out=\"validateOrganization\"\r\n                  :data-source=\"organizations\"\r\n                  display-expr=\"OrganizationName\"\r\n                  value-expr=\"OrganizationID\"\r\n                  no-data-text=\"Không có dữ liệu\"\r\n                  placeholder=\"\"\r\n                  item-template=\"item\"\r\n                  value-change-event=\"change\"\r\n                >\r\n                  <template #item=\"{ data }\">\r\n                    <div class=\"custom-item\">\r\n                      <div class=\"org-code\">{{data.OrganizationCode}}</div>\r\n                      <div class=\"org-name\">{{data.OrganizationName}}</div>\r\n                    </div>\r\n                  </template>\r\n                </DxSelectBox>\r\n                <div v-if=\"errorText[2]\" class=\"validate-error\" v-show=\"isShowError[2]\">\r\n                  <div class=\"arrow\"></div>\r\n                  <div class=\"error-text\">{{errorText[2]}}</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"content-left-row flex\">\r\n            <div class=\"item\">\r\n              <div class=\"item-title\">Chức danh</div>\r\n              <div class=\"item-input\" style=\"width: 392px\">\r\n                <DxSelectBox\r\n                  :search-enabled=\"true\"\r\n                  v-model:value=\"employee.PositionID\"\r\n                  :data-source=\"positions\"\r\n                  no-data-text=\"Không có dữ liệu\"\r\n                  display-expr=\"PositionName\"\r\n                  value-expr=\"PositionID\"\r\n                  placeholder=\"\"\r\n                  value-change-event=\"change\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"content-right\">\r\n          <div class=\"content-left-row flex\">\r\n            <div class=\"item\">\r\n              <div class=\"item-title\">Ngày sinh</div>\r\n              <div @mouseover=\"isShowError[3] = true\" @mouseleave=\"isShowError[3] = false\" id=\"dobInput\" class=\"item-input\" style=\"width: 168px; margin-right: 16px\">\r\n                <DxDateBox\r\n                  type=\"date\"\r\n                  display-format=\"dd/MM/yyyy\"\r\n                  :use-mask-behavior=\"true\"\r\n                  placeholder=\"DD/MM/YYYY\"\r\n                  invalidDateMessage=\"\"\r\n                  v-model=\"dateOfBirth\"\r\n                  :on-focus-out=\"validateDateOfBirth\"\r\n                  value-change-event=\"change\"\r\n                />\r\n                <div v-if=\"errorText[3]\" class=\"validate-error\" v-show=\"isShowError[3]\">\r\n                  <div class=\"arrow\"></div>\r\n                  <div class=\"error-text\">{{errorText[3]}}</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"item\">\r\n              <div class=\"item-title\">Giới tính</div>\r\n              <div class=\"item-input gender-input\" style=\"width: 250px\">\r\n                <div @click=\"checkRadio(1)\"><m-radio-checkbox :isCheck=\"employee.Gender == Gender.Male || employee.Gender == null\" title=\"Nam\"></m-radio-checkbox></div>\r\n                <div @click=\"checkRadio(2)\"><m-radio-checkbox :isCheck=\"employee.Gender == Gender.Female\" title=\"Nữ\"></m-radio-checkbox></div>\r\n                <div @click=\"checkRadio(3)\"><m-radio-checkbox :isCheck=\"employee.Gender == Gender.Other\" title=\"Khác\"></m-radio-checkbox></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"content-left-row flex\">\r\n            <div class=\"item\">\r\n              <div class=\"item-title\" title=\"Số Chứng minh nhân dân\">Số CMND</div>\r\n              <div class=\"item-input\" style=\"width: 245px; margin-right: 6px\">\r\n                <DxTextBox\r\n                  placeholder=\"\"\r\n                  v-model=\"employee.IdentityNumber\"\r\n                  max-length=\"20\"\r\n                  value-change-event=\"keyup\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div class=\"item\">\r\n              <div class=\"item-title\">Ngày cấp</div>\r\n              <div @mouseover=\"isShowError[4] = true\" @mouseleave=\"isShowError[4] = false\" id=\"doiInput\" class=\"item-input\" style=\"width: 168px\">\r\n                <DxDateBox\r\n                  type=\"date\"\r\n                  display-format=\"dd/MM/yyyy\"\r\n                  :use-mask-behavior=\"true\"\r\n                  placeholder=\"DD/MM/YYYY\"\r\n                  invalidDateMessage=\"\"\r\n                  v-model=\"dateOfICIC\"\r\n                  :on-focus-out=\"validateDateOfIssuanceCIC\"\r\n                  value-change-event=\"change\"\r\n                />\r\n                <div v-if=\"errorText[4]\" class=\"validate-error\" v-show=\"isShowError[4]\">\r\n                  <div class=\"arrow\"></div>\r\n                  <div class=\"error-text\">{{errorText[4]}}</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"content-left-row flex\">\r\n            <div class=\"item\">\r\n              <div class=\"item-title\">Nơi cấp</div>\r\n              <div class=\"item-input\" style=\"width: 419px\">\r\n                <DxTextBox\r\n                  v-model=\"employee.PlaceOfIssuanceCIC\"\r\n                  placeholder=\"\"\r\n                  max-length=\"255\"\r\n                  value-change-event=\"keyup\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"content-bottom\">\r\n        <div class=\"content-left-row flex\">\r\n          <div class=\"item\">\r\n            <div class=\"item-title\">Địa chỉ</div>\r\n            <div class=\"item-input\" style=\"width: 838px\">\r\n              <DxTextBox\r\n                v-model=\"employee.Address\"\r\n                placeholder=\"\"\r\n                max-length=\"255\"\r\n                value-change-event=\"keyup\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"content-left-row flex\">\r\n          <div class=\"item\">\r\n            <div class=\"item-title\" title=\"Điện thoại di động\">ĐT di động</div>\r\n            <div class=\"item-input\" style=\"width: 200px; margin-right: 6px\">\r\n              <DxTextBox\r\n                placeholder=\"\"\r\n                v-model=\"employee.Mobile\"\r\n                max-length=\"11\"\r\n                value-change-event=\"keyup\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class=\"item\">\r\n            <div class=\"item-title\" title=\"Điện thoại cố định\">ĐT cố định</div>\r\n            <div class=\"item-input\" style=\"width: 200px; margin-right: 6px\">\r\n              <DxTextBox\r\n                placeholder=\"\"\r\n                v-model=\"employee.LandPhone\"\r\n                max-length=\"11\"\r\n                value-change-event=\"keyup\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class=\"item\">\r\n            <div class=\"item-title\">Email</div>\r\n            <div @mouseover=\"isShowError[5] = true\" @mouseleave=\"isShowError[5] = false\" id=\"emailInput\" class=\"item-input\" style=\"width: 200px\">\r\n              <DxTextBox\r\n                placeholder=\"\"\r\n                v-model=\"employee.Email\"\r\n                :on-focus-out=\"validateEmail\"\r\n                max-length=\"100\"\r\n                value-change-event=\"keyup\"\r\n              />\r\n              <div v-if=\"errorText[5]\" class=\"validate-error\" v-show=\"isShowError[5]\">\r\n                <div class=\"arrow\"></div>\r\n                <div class=\"error-text\">{{errorText[5]}}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"content-left-row flex\">\r\n          <div class=\"item\">\r\n            <div class=\"item-title\">Tài khoản ngân hàng</div>\r\n            <div class=\"item-input\" style=\"width: 200px; margin-right: 6px\">\r\n              <DxTextBox\r\n                placeholder=\"\"\r\n                v-model=\"employee.BankAccount\"\r\n                max-length=\"20\"\r\n                value-change-event=\"keyup\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class=\"item\">\r\n            <div class=\"item-title\">Tên ngân hàng</div>\r\n            <div class=\"item-input\" style=\"width: 200px; margin-right: 6px\">\r\n              <DxTextBox\r\n                placeholder=\"\"\r\n                v-model=\"employee.BankName\"\r\n                max-length=\"255\"\r\n                value-change-event=\"keyup\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class=\"item\">\r\n            <div class=\"item-title\">Chi nhánh</div>\r\n            <div class=\"item-input\" style=\"width: 200px\">\r\n              <DxTextBox\r\n                placeholder=\"\"\r\n                v-model=\"employee.BankBranch\"\r\n                max-length=\"255\"\r\n                value-change-event=\"keyup\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"content-control flex\">\r\n        <div class=\"control-left\" @click=\"hideDialogDetail\">\r\n          <m-button buttonName=\"Hủy\" buttonType=\"white\"></m-button>\r\n        </div>\r\n        <div class=\"control-right flex\">\r\n          <div @click=\"saveOnClick\" @keydown.ctrl.s.prevent.stop=\"doShortcut\" title=\"Cất (Ctrl + S)\"><m-button buttonName=\"Cất\" buttonType=\"white\"></m-button></div>\r\n          <div @click=\"refillFormOnClick\" @keydown.ctrl.s.prevent.stop=\"doShortcut\" title=\"Cất và thêm (Ctrl + Shift + S)\"><m-button buttonName=\"Cất và thêm\" buttonType=\"green\"></m-button></div>\r\n        </div>\r\n      </div>\r\n    </template>\r\n  </m-popup>\r\n  <m-popup v-show=\"showErrorPopup\">\r\n    <template #content>\r\n      <div class=\"noti-popup\">\r\n        <div class=\"noti-icon flex\"><div class=\"icon-error\"></div></div>\r\n        <div class=\"noti-text\">\r\n          <div v-for=\"errtext in errorText\" :key=\"errtext\" v-show=\"errtext\" class=\"error-text-line\">{{errtext}}</div>\r\n        </div>\r\n      </div>\r\n      <div class=\"popup-content-control flex\">\r\n        <div @click=\"closePopup\"><m-button buttonName=\"Đóng\" buttonType=\"green\"></m-button></div>\r\n      </div>\r\n    </template>\r\n  </m-popup>\r\n  <m-popup v-show=\"showInfoPopup\">\r\n    <template #content>\r\n      <div class=\"noti-popup\">\r\n        <div class=\"noti-icon flex\"><div class=\"icon-info\"></div></div>\r\n        <span class=\"noti-info-text\"><div>{{POP_UP.ChangeData}}</div></span>\r\n      </div>\r\n      <div class=\"popup-info-control flex\">\r\n        <div class=\"control-left\">\r\n          <div @click=\"closePopup\"><m-button buttonName=\"Hủy\" buttonType=\"white\"></m-button></div>\r\n        </div>\r\n        <div class=\"control-right flex\">\r\n          <div @click=\"cancelSaveAction\"><m-button buttonName=\"Không\" buttonType=\"white\"></m-button></div>\r\n          <div @click=\"confirmSaveAction\"><m-button buttonName=\"Có\" buttonType=\"green\"></m-button></div>\r\n        </div>\r\n      </div>\r\n    </template>\r\n  </m-popup>\r\n  <m-popup v-show=\"showDuplicatePopup\">\r\n    <template #content>\r\n      <div class=\"noti-popup\">\r\n        <div class=\"noti-icon flex\"><div class=\"icon-warning\"></div></div>\r\n        <span class=\"noti-info-text\"><div>Mã nhân viên &lt;{{employee.EmployeeCode}}&gt; đã tồn tại trong hệ thống, vui lòng kiểm tra lại.</div></span>\r\n      </div>\r\n      <div class=\"popup-info-control flex\">\r\n        <div class=\"control-right\"><div @click=\"closePopup\"><m-button buttonName=\"Đồng ý\" buttonType=\"green\"></m-button></div></div>\r\n      </div>\r\n    </template>\r\n  </m-popup>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport ConstApi from '../../constants/api/constApi'\r\nimport ConstEndpoint from '../../constants/api/constEndpoint'\r\nimport compareTwoObjects from '../../constants/extensions/compareTwoObjects'\r\nimport MPopup from \"@/components/base/popup/MPopup.vue\";\r\nimport MCheckbox from \"@/components/base/checkbox/MCheckbox.vue\";\r\nimport MRadioCheckbox from '@/components/base/checkbox/MRadioCheckbox.vue';\r\nimport MButton from '@/components/base/button/MButton.vue';\r\nimport { mapMutations, mapActions, mapGetters } from \"vuex\";\r\nimport MISAResource from '../../constants/resources/MISAResource'\r\nimport MISAEnum from '@/constants/enums/MISAEnum'\r\n\r\nexport default {\r\n  components: { MPopup, MCheckbox, MRadioCheckbox, MButton },\r\n  props: ['isHide', 'saveMode', 'employeeSelected'],\r\n  data() {\r\n    return {\r\n      employee: {},\r\n      isCustomer: false,\r\n      isGroup: false,\r\n      isShowError: [],\r\n      errorText: [],\r\n      isValid: true,\r\n      elementFocus: null,\r\n      isSuccess: false,\r\n      addMode: null,\r\n      showErrorPopup: false,\r\n      showInfoPopup: false,\r\n      showDuplicatePopup: false,\r\n      dateOfBirth: null,\r\n      dateOfICIC: null,\r\n      oldEmployee: {},\r\n      axiosMethod: null,\r\n      toastText: null,\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"organizations\", \"positions\"])\r\n  },\r\n  mounted(){\r\n    this.Gender = MISAEnum.Gender;\r\n    this.POP_UP = MISAResource.POP_UP;\r\n    this.getOrganizations();\r\n    this.getPositions();\r\n    // tạo sự kiện sử dụng phím tắt\r\n    document.addEventListener(\"keydown\", this.doShortcut);\r\n  },\r\n  beforeUnmount() {\r\n    // hủy sự kiện sử dụng phím tắt\r\n    document.removeEventListener(\"keydown\", this.doShortcut);\r\n  },\r\n  watch: {\r\n    // Khi nhân viên được chọn thay đổi, gán giá trị vào data employee\r\n    employeeSelected: function(value){\r\n      this.employee = value;\r\n      this.oldEmployee = {...value};\r\n      if(value){\r\n        this.dateOfBirth = value.DateOfBirth;\r\n        this.dateOfICIC = value.DateOfIssuanceCIC;\r\n      }\r\n    },\r\n    // Mỗi khi mở popup detail, nếu là thêm mới hoặc nhân bản, lấy mã nhân viên mới\r\n    isHide: function(value){\r\n      if(!value && this.saveMode == MISAResource.SAVE_MODE.Add){\r\n        this.getNewEmployeeCode();\r\n        this.employee.Gender = MISAEnum.Gender.Male;\r\n      } else if(!value && this.saveMode == MISAResource.SAVE_MODE.Duplicate){\r\n        this.getNewEmployeeCode();\r\n      }\r\n      this.errorText = [],\r\n      this.isShowError = [],\r\n      this.isSuccess = false;\r\n    },\r\n    // Gán giá trị của prop saveMode vào data addMode\r\n    saveMode: function(value){\r\n      this.addMode = value;\r\n    }\r\n  },\r\n  methods: {\r\n    // Hàm kiểm tra thay đổi dữ liệu hay chưa\r\n    compareTwoObjects,\r\n\r\n    ...mapMutations([ \"setOrganizations\", \"setPositions\"]),\r\n    ...mapActions([ \"getOrganizations\", \"getPositions\"]),\r\n\r\n    /**\r\n     * Sử dụng phím tắt để thực hiện nhanh các chức năng\r\n     * Author: VQBao - 23/10/2022\r\n     */\r\n    doShortcut(e) {\r\n      // Nếu key = ESC, đóng detail\r\n      if (e.keyCode === 27) {\r\n        this.hideDialogDetail();\r\n      }\r\n      // Khi sử dụng Ctrl + S thì thực hiện cất dữ liệu\r\n      else if(e.keyCode === 83 && e.ctrlKey && !e.shiftKey){\r\n        this.saveOnClick();\r\n        e.preventDefault();\r\n      }\r\n      // Khi sử dụng Ctrl + Shift + S thì thực hiện cất và thêm mới\r\n      else if(e.keyCode === 83 && e.ctrlKey && e.shiftKey){\r\n        this.refillFormOnClick();\r\n        e.preventDefault();\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Khi click tắt form thông tin chi tiết, hiện popup info\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    hideDialogDetail(){\r\n      this.employee.DateOfBirth = this.dateOfBirth;\r\n      this.employee.DateOfIssuanceCIC = this.dateOfICIC;\r\n      // So sánh object nhân viên cũ và mới, nếu thay đổi thì hiện popup thay đổi dữ liệu\r\n      if(!this.compareTwoObjects(this.oldEmployee, this.employee)){\r\n        this.showInfoPopup = true;\r\n      } else {\r\n        this.$emit(\"hideDetail\", null, true);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Khi chọn không ở popup info, tắt form thông tin chi tiết\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    cancelSaveAction(){\r\n      this.showInfoPopup = false;\r\n      this.$emit(\"hideDetail\", null, true);\r\n    },\r\n\r\n    /**\r\n     * Khi chọn có ở popup info, tắt popup rồi thực hiện cất\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    confirmSaveAction(){\r\n      this.showInfoPopup = false;\r\n      this.saveOnClick();\r\n    },\r\n    \r\n    /**\r\n     * focus vào ô input đầu tiên mỗi khi mở form chi tiết\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    onInitialized: function (e) {\r\n      this.elementFocus = e;\r\n      setTimeout(function () {\r\n        e.component.focus();  \r\n      }, 0);  \r\n    },\r\n\r\n    /**\r\n     * Khi bấm cất, thêm nhân viên rồi tắt form\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    async saveOnClick(){\r\n      await this.addEmployee();\r\n      if(this.isSuccess){\r\n        this.$emit(\"hideDetail\", null, true);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Gọi api thêm, sửa nhân viên\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    async addEmployee(){\r\n      // var axiosMethod = \"\";\r\n      // var toastText = \"\";\r\n      var me = this;\r\n      // var newGuid = this.$uuid.v4();\r\n\r\n      // if(this.addMode == MISAResource.SAVE_MODE.Add){\r\n      //   me.employee.EmployeeID = newGuid;\r\n      //   axiosMethod = 'post';\r\n      //   toastText = MISAResource.TOAST.Add;\r\n      // } else if(this.addMode == MISAResource.SAVE_MODE.Edit){\r\n      //   axiosMethod = 'put';\r\n      //   toastText = MISAResource.TOAST.Edit;\r\n      // } else if(this.addMode == MISAResource.SAVE_MODE.Duplicate){\r\n      //   me.employee.EmployeeID = newGuid;\r\n      //   axiosMethod = 'post';\r\n      //   toastText = MISAResource.TOAST.Duplicate;\r\n      // }\r\n      me.prepareToAddEmployee()\r\n      me.validateEmployee();\r\n      if(me.isValid){\r\n        var list = [];\r\n        list.push(me.employee);\r\n        try {\r\n          await axios({\r\n            method: this.axiosMethod,\r\n            url: ConstApi.EmployeeApi,\r\n            data: list\r\n          })\r\n            .then(() => {\r\n              me.isSuccess = true;\r\n              me.employee = {};\r\n              me.$emit(\"loadData\", 20, 1, \"\");\r\n              me.$emit(\"showToast\", me.toastText, 'success')\r\n              me.getNewEmployeeCode();\r\n              me.addMode = MISAResource.SAVE_MODE.Add;\r\n            }).catch((error) => {\r\n              me.$emit(\"hideLoader\", true);\r\n              if(error.response.data.errorMsg[0] == MISAResource.ERROR.DuplicatedCodeResponse){\r\n                let el = document.getElementById(\"employeeCodeInput\");\r\n                el.classList.add(\"check-border\");\r\n                me.errorText[0] = MISAResource.ERROR.DuplicatedCode;\r\n                me.showDuplicatePopup = true;\r\n              } else {\r\n                me.$emit(\"showToast\", error.response.data.errorMsg, 'error');\r\n                me.$emit(\"hideDetail\", null, true);\r\n              }\r\n            })\r\n        } catch (error) {\r\n          me.$emit(\"hideLoader\", true);\r\n          console.log(error);\r\n        }\r\n      }\r\n    },\r\n\r\n    prepareToAddEmployee(){\r\n      var newGuid = this.$uuid.v4();\r\n      if(this.addMode == MISAResource.SAVE_MODE.Add){\r\n        this.employee.EmployeeID = newGuid;\r\n        this.axiosMethod = 'post';\r\n        this.toastText = MISAResource.TOAST.Add;\r\n      } else if(this.addMode == MISAResource.SAVE_MODE.Edit){\r\n        this.axiosMethod = 'put';\r\n        this.toastText = MISAResource.TOAST.Edit;\r\n      } else if(this.addMode == MISAResource.SAVE_MODE.Duplicate){\r\n        this.employee.EmployeeID = newGuid;\r\n        this.axiosMethod = 'post';\r\n        this.toastText = MISAResource.TOAST.Duplicate;\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Khi bấm cất và thêm, thực hiên cất rồi reset form để tiếp tục thêm mới\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    async refillFormOnClick(){\r\n      await this.addEmployee();\r\n      this.isSuccess = false;\r\n      this.onInitialized(this.elementFocus);\r\n    },\r\n\r\n    /**\r\n     * Check các check box là khách hàng và là nhà cung cấp, 1-true, 0-false\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    checkCheckbox(check){\r\n      if(check == 1){\r\n        if(this.employee.IsCustomer == 1){\r\n          this.employee.IsCustomer = 0;\r\n        } else {\r\n          this.employee.IsCustomer = 1;\r\n        }\r\n      } else if(check == 2) {\r\n        if(this.employee.IsGroup == 1){\r\n          this.employee.IsGroup = 0;\r\n        } else {\r\n          this.employee.IsGroup = 1;\r\n        }\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Check radio giới tính\r\n     * 1: Nam, 2: Nữ\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    checkRadio(check){\r\n      this.employee.Gender = check;\r\n    },\r\n\r\n    /**\r\n     * Thực hiện validate nhân viên khi bấm cất\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    validateEmployee(){\r\n      this.isValid = true;\r\n      this.validateEmployeeCode();\r\n      this.validateFullName();\r\n      this.validateOrganization();\r\n      this.validateDateOfBirth();\r\n      this.validateDateOfIssuanceCIC();\r\n      this.validateEmail();\r\n      for (let i = 0; i < this.errorText.length; i++) {\r\n        if(this.errorText[i]){\r\n          this.isValid = false;\r\n          break;\r\n        }\r\n      }\r\n      if(!this.isValid){\r\n        this.showErrorPopup = true;\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Validate mã nhân viên\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    validateEmployeeCode(){\r\n      this.validateEmpty(\"employeeCodeInput\", this.employee.EmployeeCode, 0, MISAResource.ERROR.EmptyCode)\r\n    },\r\n\r\n    /**\r\n     * Validate tên nhân viên\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    validateFullName(){\r\n      this.validateEmpty(\"fullNameInput\", this.employee.FullName, 1, MISAResource.ERROR.EmptyFullName)\r\n    },\r\n\r\n    /**\r\n     * Validate tên đơn vị\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    validateOrganization(){\r\n      this.validateEmpty(\"organizationInput\", this.employee.OrganizationID, 2, MISAResource.ERROR.EmptyOrganization)\r\n    },\r\n\r\n    /**\r\n     * Check các trường thông tin trống\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    validateEmpty(elementId, value, errorIndex, error){\r\n      let el = document.getElementById(elementId);\r\n      if(!value){\r\n        el.classList.add(\"check-border\");\r\n        this.errorText[errorIndex] = error;\r\n      } else {\r\n        el.classList.remove(\"check-border\");\r\n        this.errorText[errorIndex] = \"\";\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Validate email đúng định dạng\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    validateEmail(){\r\n      let el = document.getElementById(\"emailInput\");\r\n      if(this.employee.Email){\r\n        var emailFormat = /^([a-zA-Z0-9_\\-.]+)@([a-zA-Z0-9_\\-.]+)\\.([a-zA-Z]{2,5})$/;\r\n        if (!emailFormat.test(this.employee.Email)) {\r\n          el.classList.add(\"check-border\");\r\n          this.errorText[5] = MISAResource.ERROR.ValidEmail\r\n        } else {\r\n          el.classList.remove(\"check-border\");\r\n          this.errorText[5] = \"\";\r\n        }\r\n      } else {\r\n        el.classList.remove(\"check-border\");\r\n        this.errorText[5] = \"\";\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Validate ngày sinh lớn hơn ngày hiện tại\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    validateDateOfBirth(){\r\n      this.validateDate(\"dobInput\", this.dateOfBirth, 3, MISAResource.ERROR.ValidDateOfBirth);\r\n    },\r\n\r\n    /**\r\n     * Validate ngày cấp không lớn hơn ngày hiện tại\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    validateDateOfIssuanceCIC(){\r\n      this.validateDate(\"doiInput\", this.dateOfICIC, 4, MISAResource.ERROR.ValidDateOfIssuanceCIC);\r\n    },\r\n\r\n    /**\r\n     * Kiểm tra ngày chọn có lớn hơn ngày hiện tại hay không\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    validateDate(elementId, value, errorIndex, error){\r\n      let el = document.getElementById(elementId);\r\n      if(value){\r\n        let today = new Date();\r\n        today = this.convertDate(today);\r\n        if(errorIndex == 3) this.employee.DateOfBirth = this.convertDate(value);\r\n        else if(errorIndex == 4) this.employee.DateOfIssuanceCIC = this.convertDate(value);\r\n        if(this.convertDate(value) > today){\r\n          el.classList.add(\"check-border\");\r\n          this.errorText[errorIndex] = error;\r\n        } else {\r\n          el.classList.remove(\"check-border\");\r\n          this.errorText[errorIndex] = \"\";\r\n        }\r\n      } else {\r\n        el.classList.remove(\"check-border\");\r\n        this.errorText[errorIndex] = \"\";\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Lấy mã nhân viên mới\r\n     * Author: VQBao - 11/10/2022\r\n     */\r\n    getNewEmployeeCode(){\r\n      var me = this;\r\n      try {\r\n        axios.get(ConstApi.EmployeeApi + ConstEndpoint.NewEmployeeCode)\r\n        .then((response) => {\r\n          if(!me.isHide){\r\n            me.employee.EmployeeCode = response.data;\r\n            if(me.addMode == MISAResource.SAVE_MODE.Add){\r\n              me.employee.Gender = MISAEnum.Gender.Male;\r\n            }\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          me.$emit(\"showToast\", error.response.data.errorMsg, 'error');\r\n        })\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Đóng các popup\r\n     * Author: VQBao - 11/10/2022\r\n     */\r\n    closePopup(){\r\n      this.showErrorPopup = false;\r\n      this.showInfoPopup = false;\r\n      this.showDuplicatePopup = false;\r\n      this.onInitialized(this.elementFocus);\r\n    },\r\n    /**\r\n     * Chuyển date về cùng định dạng\r\n     * Author: VQBao - 11/10/2022\r\n     */\r\n    convertDate(date){\r\n      let newDate = new Date(date);\r\n      if (date && newDate instanceof Date && !isNaN(newDate.valueOf())) {\r\n        let _day = newDate.getDate() + 1;\r\n        let _month = newDate.getMonth();\r\n        let _year = newDate.getFullYear();\r\n        newDate = new Date(_year, _month, _day);\r\n      }\r\n      return newDate;\r\n    },\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n.hide {\r\n  display: none !important;\r\n}\r\n.header {\r\n  width: 836px;\r\n  height: 73px;\r\n  box-sizing: border-box;\r\n}\r\n.header-title {\r\n  font-size: 24px;\r\n  color: #111;\r\n  font-weight: 700;\r\n  height: 33px;\r\n}\r\n.header-checkbox {\r\n  padding: 0 20px;\r\n}\r\n.require-input {\r\n  color: #ff0000;\r\n}\r\n.content-left {\r\n  width: 418px;\r\n  padding: 0 26px 0 0;\r\n  box-sizing: border-box;\r\n}\r\n.item-title {\r\n  height: 21px;\r\n  font-size: 12px;\r\n  font-weight: 700;\r\n}\r\n.content-left-row {\r\n  width: 392px;\r\n  height: 65px;\r\n  box-sizing: border-box;\r\n  padding-bottom: 10px;\r\n}\r\n.content-bottom {\r\n  width: 836px;\r\n  padding-bottom: 24px;\r\n  box-sizing: border-box;\r\n  margin-top: 24px;\r\n  border-bottom: 1px solid #c9ccd2;\r\n}\r\n.content-control {\r\n  padding: 20px 0;\r\n  width: 836px;\r\n  position: relative;\r\n}\r\n.control-right {\r\n  position: absolute;\r\n  top: 20px;\r\n  right: -10px;\r\n}\r\n.header-right {\r\n  position: absolute;\r\n  top: 12px;\r\n  right: -10px;\r\n}\r\n.header-icon {\r\n  width: 24px;\r\n  height: 24px;\r\n  justify-content: center;\r\n  margin-left: 6px;\r\n  cursor: pointer;\r\n}\r\n.check-border {\r\n  box-sizing: border-box;\r\n  border: 1px solid red;\r\n  border-radius: 2px;\r\n}\r\n.check-border .dx-texteditor.dx-editor-outlined{\r\n  border: none !important;\r\n}\r\n.gender-input {\r\n  display: flex;\r\n  border: none;\r\n}\r\n\r\n.custom-item {\r\n  display: flex;\r\n}\r\n.org-code{\r\n  width: 100px;\r\n  margin-right: 6px;\r\n}\r\n.validate-error {\r\n  position: absolute;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin: auto;\r\n  left: 0;\r\n  right: 0;\r\n  text-align: center;\r\n}\r\n.arrow {\r\n  width: 8px;\r\n  height: 8px;\r\n  background-color: #f34a4a;\r\n  transform: rotate(45deg);\r\n}\r\n.error-text {\r\n  background-color: #f34a4a;\r\n  color: #fff;\r\n  border-radius: 4px;\r\n  height: 24px;\r\n  width: max-content;\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 0 6px;\r\n  margin-top: -4px;\r\n}\r\n.item-input {\r\n  position: relative;\r\n}\r\n.noti-popup {\r\n  margin-top: 32px;\r\n  display: flex;\r\n  width: 380px;\r\n  min-height: 70px;\r\n  border-bottom: 1px solid #b8bcc3;\r\n  box-sizing: border-box;\r\n}\r\n.noti-icon {\r\n  width: 48px;\r\n  height: 48px;\r\n  justify-content: center;\r\n}\r\n.noti-text {\r\n  padding: 4px 0 16px 16px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n}\r\n.error-text-line{\r\n  height: 24px;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.popup-content-control {\r\n  padding: 20px 0;\r\n  position: relative;\r\n  justify-content: center;\r\n}\r\n\r\n.noti-info-text {\r\n  padding: 12px 0 0 16px;\r\n}\r\n.popup-info-control {\r\n  padding: 20px 0;\r\n  position: relative;\r\n  height: 74px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}