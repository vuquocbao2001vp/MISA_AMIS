{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport MPopup from \"@/components/base/popup/MPopup.vue\";\nimport MCheckbox from \"@/components/base/checkbox/MCheckbox.vue\";\nimport MRadioCheckbox from '@/components/base/checkbox/MRadioCheckbox.vue';\nimport MButton from '@/components/base/button/MButton.vue';\nimport { mapMutations, mapActions, mapGetters } from \"vuex\";\nexport default {\n  components: {\n    MPopup,\n    MCheckbox,\n    MRadioCheckbox,\n    MButton\n  },\n  props: ['isHide', 'saveMode', 'employeeSelected'],\n\n  data() {\n    return {\n      employee: {},\n      isCustomer: false,\n      isGroup: false,\n      isShowError: [],\n      errorText: [],\n      isValid: true,\n      elementFocus: null,\n      isSuccess: false,\n      addMode: 0\n    };\n  },\n\n  computed: { ...mapGetters([\"organizations\", \"positions\"])\n  },\n\n  mounted() {\n    this.getOrganizations();\n    this.getPositions();\n  },\n\n  watch: {\n    employeeSelected: function (value) {\n      this.employee = value;\n    },\n    isHide: function (value) {\n      if (!value && this.saveMode == 1) {\n        this.getNewEmployeeCode();\n        this.employee.Gender = 1;\n      } else if (!value && this.saveMode == 3) {\n        this.getNewEmployeeCode();\n      }\n\n      this.isSuccess = false;\n    },\n    saveMode: function (value) {\n      this.addMode = value;\n    }\n  },\n  methods: { ...mapMutations([\"setOrganizations\", \"setPositions\"]),\n    ...mapActions([\"getOrganizations\", \"getPositions\"]),\n\n    /**\r\n     * Thực hiện tắt form thông tin chi tiết\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    hideDialogDetail() {\n      this.$emit(\"hideDetail\", null, true);\n    },\n\n    /**\r\n     * focus vào ô input đầu tiên mỗi khi mở form chi tiết\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    onInitialized: function (e) {\n      this.elementFocus = e;\n      setTimeout(function () {\n        e.component.focus();\n      }, 0);\n    },\n\n    /**\r\n     * Khi bấm cất, thêm nhân viên rồi tắt form\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    async saveOnClick() {\n      await this.addEmployee();\n\n      if (this.isSuccess) {\n        this.$emit(\"hideDetail\", null, true);\n      }\n    },\n\n    /**\r\n     * Gọi api thêm, sửa nhân viên\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    async addEmployee() {\n      var axiosMethod = \"\";\n      var toastText = \"\";\n      document.getElementById(\"loader\").style.display = \"block\";\n      var me = this;\n      var newGuid = this.$uuid.v4();\n\n      if (this.addMode == 1) {\n        me.employee.EmployeeID = newGuid;\n        axiosMethod = 'post';\n        toastText = \"Thêm người dùng thành công\";\n      } else if (this.addMode == 2) {\n        axiosMethod = 'put';\n        toastText = \"Sửa người dùng thành công\";\n      } else if (this.addMode == 3) {\n        me.employee.EmployeeID = newGuid;\n        axiosMethod = 'post';\n        toastText = \"Nhân bản người dùng thành công\";\n      }\n\n      var list = [];\n      list.push(this.employee);\n      me.validateEmployee();\n\n      if (this.isValid) {\n        try {\n          await axios({\n            method: axiosMethod,\n            url: \"https://localhost:44317/api/v1/Employees\",\n            data: list\n          }).then(() => {\n            document.getElementById(\"loader\").style.display = \"none\";\n            me.isSuccess = true;\n            me.employee = {};\n            me.$emit(\"loadData\", 20, 1, \"\");\n            me.$emit(\"showToast\", toastText);\n            me.getNewEmployeeCode();\n            this.addMode = 1;\n          }).catch(error => {\n            document.getElementById(\"loader\").style.display = \"none\";\n\n            if (error.response.data.errorMsg[0] == \"Mã nhân viên đã tồn tại trong hệ thống\") {\n              let el = document.getElementById(\"employeeCodeInput\");\n              el.classList.add(\"check-border\");\n              me.errorText[0] = \"Mã không được trùng.\";\n              me.onInitialized(this.elementFocus);\n            }\n          });\n        } catch (error) {\n          document.getElementById(\"loader\").style.display = \"none\";\n        }\n      } else {\n        document.getElementById(\"loader\").style.display = \"none\";\n      }\n    },\n\n    /**\r\n     * Khi bấm cất và thêm, thực hiên cất rồi reset form để tiếp tục thêm mới\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    async refillFormOnClick() {\n      await this.addEmployee();\n      this.isSuccess = false;\n      this.onInitialized(this.elementFocus);\n    },\n\n    /**\r\n     * Check các check box là khách hàng và là nhà cung cấp\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    checkCheckbox(check) {\n      if (check == 1) {\n        if (this.employee.IsCustomer == 1) {\n          this.employee.IsCustomer = 0;\n        } else {\n          this.employee.IsCustomer = 1;\n        }\n      } else if (check == 2) {\n        if (this.employee.IsGroup == 1) {\n          this.employee.IsGroup = 0;\n        } else {\n          this.employee.IsGroup = 1;\n        }\n      }\n    },\n\n    /**\r\n     * Check radio giới tính\r\n     * 1: Nam, 2: Nữ\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    checkRadio(check) {\n      if (check == 1) {\n        this.employee.Gender = 1;\n      } else if (check == 2) {\n        this.employee.Gender = 2;\n      }\n    },\n\n    /**\r\n     * Thực hiện validate nhân viên khi bấm cất\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    validateEmployee() {\n      this.isValid = true;\n      this.validateEmployeeCode();\n      this.validateFullName();\n      this.validateOrganization();\n      this.validateDateOfBirth();\n      this.validateDateOfIssuanceCIC();\n      this.validateEmail();\n\n      for (let i = 0; i < this.errorText.length; i++) {\n        if (this.errorText[i]) {\n          this.isValid = false;\n          break;\n        }\n      }\n    },\n\n    /**\r\n     * Validate mã nhân viên\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    validateEmployeeCode() {\n      let el = document.getElementById(\"employeeCodeInput\");\n\n      if (!this.employee.EmployeeCode) {\n        el.classList.add(\"check-border\");\n        this.errorText[0] = \"Mã không được để trống.\";\n      } else {\n        el.classList.remove(\"check-border\");\n        this.errorText[0] = \"\";\n      }\n    },\n\n    /**\r\n     * Validate tên nhân viên\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    validateFullName() {\n      let el = document.getElementById(\"fullNameInput\");\n\n      if (!this.employee.FullName) {\n        el.classList.add(\"check-border\");\n        this.errorText[1] = \"Tên không được để trống.\";\n      } else {\n        el.classList.remove(\"check-border\");\n        this.errorText[1] = \"\";\n      }\n    },\n\n    /**\r\n     * Validate tên đơn vị\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    validateOrganization() {\n      let el = document.getElementById(\"organizationInput\");\n\n      if (!this.employee.OrganizationID) {\n        el.classList.add(\"check-border\");\n        this.errorText[2] = \"Đơn vị không được để trống.\";\n      } else {\n        el.classList.remove(\"check-border\");\n        this.errorText[2] = \"\";\n      }\n    },\n\n    /**\r\n     * Validate email đúng định dạng\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    validateEmail() {\n      let el = document.getElementById(\"emailInput\");\n\n      if (this.employee.Email) {\n        var emailFormat = /^([a-zA-Z0-9_\\-.]+)@([a-zA-Z0-9_\\-.]+)\\.([a-zA-Z]{2,5})$/;\n\n        if (!emailFormat.test(this.employee.Email)) {\n          el.classList.add(\"check-border\");\n          this.errorText[5] = \"Email không đúng định dạng.\";\n        } else {\n          el.classList.remove(\"check-border\");\n          this.errorText[5] = \"\";\n        }\n      } else {\n        el.classList.remove(\"check-border\");\n        this.errorText[5] = \"\";\n      }\n    },\n\n    /**\r\n     * Validate ngày sinh lớn hơn ngày hiện tại\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    validateDateOfBirth() {\n      let el = document.getElementById(\"dobInput\");\n      console.log(this.employee.DateOfBirth);\n\n      if (this.employee.DateOfBirth) {\n        let today = new Date();\n\n        if (this.employee.DateOfBirth > today) {\n          el.classList.add(\"check-border\");\n          this.errorText[3] = \"Ngày sinh không được lớn hơn ngày hiện tại.\";\n        } else {\n          el.classList.remove(\"check-border\");\n          this.errorText[3] = \"\";\n        }\n      } else {\n        el.classList.remove(\"check-border\");\n        this.errorText[3] = \"\";\n      }\n    },\n\n    /**\r\n     * Validate ngày cấp không lớn hơn ngày hiện tại\r\n     * Author: VQBao - 12/10/2022\r\n     */\n    validateDateOfIssuanceCIC() {\n      let el = document.getElementById(\"doiInput\");\n\n      if (this.employee.DateOfIssuanceCIC) {\n        let today = new Date();\n\n        if (this.employee.DateOfIssuanceCIC > today) {\n          el.classList.add(\"check-border\");\n          this.errorText[4] = \"Ngày cấp không được lớn hơn ngày hiện tại\";\n        } else {\n          el.classList.remove(\"check-border\");\n          this.errorText[4] = \"\";\n        }\n      } else {\n        el.classList.remove(\"check-border\");\n        this.errorText[4] = \"\";\n      }\n    },\n\n    /**\r\n     * Lấy mã nhân viên mới\r\n     * Author: VQBao - 11/10/2022\r\n     */\n    getNewEmployeeCode() {\n      try {\n        axios.get(\"https://localhost:44317/api/v1/Employees/NewEmployeeCode\").then(response => {\n          if (!this.isHide) {\n            this.employee.EmployeeCode = response.data;\n\n            if (this.addMode == 1) {\n              this.employee.Gender = 1;\n            }\n          }\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","MPopup","MCheckbox","MRadioCheckbox","MButton","mapMutations","mapActions","mapGetters","components","props","data","employee","isCustomer","isGroup","isShowError","errorText","isValid","elementFocus","isSuccess","addMode","computed","mounted","getOrganizations","getPositions","watch","employeeSelected","value","isHide","saveMode","getNewEmployeeCode","Gender","methods","hideDialogDetail","$emit","onInitialized","e","setTimeout","component","focus","saveOnClick","addEmployee","axiosMethod","toastText","document","getElementById","style","display","me","newGuid","$uuid","v4","EmployeeID","list","push","validateEmployee","method","url","then","catch","error","response","errorMsg","el","classList","add","refillFormOnClick","checkCheckbox","check","IsCustomer","IsGroup","checkRadio","validateEmployeeCode","validateFullName","validateOrganization","validateDateOfBirth","validateDateOfIssuanceCIC","validateEmail","i","length","EmployeeCode","remove","FullName","OrganizationID","Email","emailFormat","test","console","log","DateOfBirth","today","Date","DateOfIssuanceCIC","get"],"sourceRoot":"","sources":["E:\\MisaProject\\MISA_AMIS\\MISA_AMIS_FE\\misa-amis\\src\\pages\\Employee\\EmployeeDetail.vue"],"sourcesContent":["<template>\r\n<div v-if=\"isHide == false\" id=\"employeeDetail\" :class=\"{'hide': isHide}\">\r\n  <m-popup>\r\n    <template #header>\r\n      <div class=\"header flex\">\r\n        <div class=\"header-title\">Thông tin nhân viên</div>\r\n        <div @click=\"checkCheckbox(1)\" class=\"header-checkbox\"><m-checkbox :isCheck=\"employee.IsCustomer\" title=\"Là khách hàng\" /></div>\r\n        <div @click=\"checkCheckbox(2)\" class=\"header-checkbox\"><m-checkbox :isCheck=\"employee.IsGroup\" title=\"Là nhà cung cấp\" /></div>\r\n      </div>\r\n      <div class=\"header-right flex\">\r\n        <div class=\"header-icon flex\"><div class=\"icon-help\" title=\"Giúp (F1)\"></div></div>\r\n        <div class=\"header-icon flex\" @click=\"hideDialogDetail\"><div class=\"icon-close\" title=\"Đóng (Esc)\"></div></div>\r\n      </div>\r\n    </template>\r\n    <template #content>\r\n      <div class=\"flex\">\r\n        <div class=\"content-left\">\r\n          <div class=\"content-left-row flex\">\r\n            <div class=\"item\">\r\n              <div class=\"item-title\">\r\n                Mã <span class=\"require-input\">*</span>\r\n              </div>\r\n              <div @mouseover=\"isShowError[0] = true\" @mouseleave=\"isShowError[0] = false\" id=\"employeeCodeInput\" class=\"item-input\" style=\"width: 150px; margin-right: 6px\">\r\n                <DxTextBox\r\n                  v-model=\"employee.EmployeeCode\"\r\n                  :on-focus-out=\"validateEmployeeCode\"\r\n                  :on-initialized=\"onInitialized\"\r\n                  max-length=\"20\"\r\n                />\r\n                <div v-if=\"errorText[0]\" class=\"validate-error\" v-show=\"isShowError[0]\">\r\n                  <div class=\"arrow\"></div>\r\n                  <div class=\"error-text\">{{errorText[0]}}</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"item\">\r\n              <div class=\"item-title\">\r\n                Tên <span class=\"require-input\">*</span>\r\n              </div>\r\n              <div @mouseover=\"isShowError[1] = true\" @mouseleave=\"isShowError[1] = false\" id=\"fullNameInput\" class=\"item-input\" style=\"width: 235px\">\r\n                <DxTextBox\r\n                  v-model=\"employee.FullName\"\r\n                  :on-focus-out=\"validateFullName\"\r\n                  max-length=\"100\"\r\n                />\r\n                <div v-if=\"errorText[1]\" class=\"validate-error\" v-show=\"isShowError[1]\">\r\n                  <div class=\"arrow\"></div>\r\n                  <div class=\"error-text\">{{errorText[1]}}</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"content-left-row flex\">\r\n            <div class=\"item\">\r\n              <div class=\"item-title\">\r\n                Đơn vị <span class=\"require-input\">*</span>\r\n              </div>\r\n              <div @mouseover=\"isShowError[2] = true\" @mouseleave=\"isShowError[2] = false\" id=\"organizationInput\" class=\"item-input custom\" style=\"width: 392px\">\r\n                <DxSelectBox\r\n                  v-model:value=\"employee.OrganizationID\"\r\n                  :on-focus-out=\"validateOrganization\"\r\n                  :data-source=\"organizations\"\r\n                  display-expr=\"OrganizationName\"\r\n                  value-expr=\"OrganizationID\"\r\n                  placeholder=\"\"\r\n                  item-template=\"item\"\r\n                >\r\n                  <template #item=\"{ data }\">\r\n                    <div class=\"custom-item\">\r\n                      <div class=\"org-code\">{{data.OrganizationCode}}</div>\r\n                      <div class=\"org-name\">{{data.OrganizationName}}</div>\r\n                    </div>\r\n                  </template>\r\n                </DxSelectBox>\r\n                <div v-if=\"errorText[2]\" class=\"validate-error\" v-show=\"isShowError[2]\">\r\n                  <div class=\"arrow\"></div>\r\n                  <div class=\"error-text\">{{errorText[2]}}</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"content-left-row flex\">\r\n            <div class=\"item\">\r\n              <div class=\"item-title\">Chức danh</div>\r\n              <div class=\"item-input\" style=\"width: 392px\">\r\n                <DxSelectBox\r\n                  v-model:value=\"employee.PositionID\"\r\n                  :data-source=\"positions\"\r\n                  display-expr=\"PositionName\"\r\n                  value-expr=\"PositionID\"\r\n                  placeholder=\"\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"content-right\">\r\n          <div class=\"content-left-row flex\">\r\n            <div class=\"item\">\r\n              <div class=\"item-title\">Ngày sinh</div>\r\n              <div @mouseover=\"isShowError[3] = true\" @mouseleave=\"isShowError[3] = false\" id=\"dobInput\" class=\"item-input\" style=\"width: 168px; margin-right: 16px\">\r\n                <DxDateBox\r\n                  type=\"date\"\r\n                  display-format=\"dd/MM/yyyy\"\r\n                  :use-mask-behavior=\"true\"\r\n                  placeholder=\"DD/MM/YYYY\"\r\n                  invalidDateMessage=\"\"\r\n                  v-model=\"employee.DateOfBirth\"\r\n                  :on-focus-out=\"validateDateOfBirth\"\r\n                />\r\n                <div v-if=\"errorText[3]\" class=\"validate-error\" v-show=\"isShowError[3]\">\r\n                  <div class=\"arrow\"></div>\r\n                  <div class=\"error-text\">{{errorText[3]}}</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"item\">\r\n              <div class=\"item-title\">Giới tính</div>\r\n              <div class=\"item-input gender-input\" style=\"width: 250px\">\r\n                <div @click=\"checkRadio(1)\"><m-radio-checkbox :isCheck=\"employee.Gender == 1 || employee.Gender == null\" title=\"Nam\"></m-radio-checkbox></div>\r\n                <div @click=\"checkRadio(2)\"><m-radio-checkbox :isCheck=\"employee.Gender == 2\" title=\"Nữ\"></m-radio-checkbox></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"content-left-row flex\">\r\n            <div class=\"item\">\r\n              <div class=\"item-title\" title=\"Số Chứng minh nhân dân\">Số CMND</div>\r\n              <div class=\"item-input\" style=\"width: 245px; margin-right: 6px\">\r\n                <DxTextBox\r\n                  placeholder=\"\"\r\n                  v-model=\"employee.IdentityNumber\"\r\n                  max-length=\"20\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div class=\"item\">\r\n              <div class=\"item-title\">Ngày cấp</div>\r\n              <div @mouseover=\"isShowError[4] = true\" @mouseleave=\"isShowError[4] = false\" id=\"doiInput\" class=\"item-input\" style=\"width: 168px\">\r\n                <DxDateBox\r\n                  type=\"date\"\r\n                  display-format=\"dd/MM/yyyy\"\r\n                  :use-mask-behavior=\"true\"\r\n                  placeholder=\"DD/MM/YYYY\"\r\n                  invalidDateMessage=\"\"\r\n                  v-model=\"employee.DateOfIssuanceCIC\"\r\n                  :on-focus-out=\"validateDateOfIssuanceCIC\"\r\n                />\r\n                <div v-if=\"errorText[4]\" class=\"validate-error\" v-show=\"isShowError[4]\">\r\n                  <div class=\"arrow\"></div>\r\n                  <div class=\"error-text\">{{errorText[4]}}</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"content-left-row flex\">\r\n            <div class=\"item\">\r\n              <div class=\"item-title\">Nơi cấp</div>\r\n              <div class=\"item-input\" style=\"width: 419px\">\r\n                <DxTextBox\r\n                  v-model=\"employee.PlaceOfIssuanceCIC\"\r\n                  placeholder=\"\"\r\n                  max-length=\"255\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"content-bottom\">\r\n        <div class=\"content-left-row flex\">\r\n          <div class=\"item\">\r\n            <div class=\"item-title\">Địa chỉ</div>\r\n            <div class=\"item-input\" style=\"width: 838px\">\r\n              <DxTextBox\r\n                v-model=\"employee.Address\"\r\n                placeholder=\"\"\r\n                max-length=\"255\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"content-left-row flex\">\r\n          <div class=\"item\">\r\n            <div class=\"item-title\" title=\"Điện thoại di động\">ĐT di động</div>\r\n            <div class=\"item-input\" style=\"width: 200px; margin-right: 6px\">\r\n              <DxTextBox\r\n                placeholder=\"\"\r\n                v-model=\"employee.Mobile\"\r\n                max-length=\"11\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class=\"item\">\r\n            <div class=\"item-title\" title=\"Điện thoại cố định\">ĐT cố định</div>\r\n            <div class=\"item-input\" style=\"width: 200px; margin-right: 6px\">\r\n              <DxTextBox\r\n                placeholder=\"\"\r\n                v-model=\"employee.LandPhone\"\r\n                max-length=\"11\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class=\"item\">\r\n            <div class=\"item-title\">Email</div>\r\n            <div @mouseover=\"isShowError[5] = true\" @mouseleave=\"isShowError[5] = false\" id=\"emailInput\" class=\"item-input\" style=\"width: 200px\">\r\n              <DxTextBox\r\n                placeholder=\"\"\r\n                v-model=\"employee.Email\"\r\n                :on-focus-out=\"validateEmail\"\r\n                max-length=\"100\"\r\n              />\r\n              <div v-if=\"errorText[5]\" class=\"validate-error\" v-show=\"isShowError[5]\">\r\n                <div class=\"arrow\"></div>\r\n                <div class=\"error-text\">{{errorText[5]}}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"content-left-row flex\">\r\n          <div class=\"item\">\r\n            <div class=\"item-title\">Tài khoản ngân hàng</div>\r\n            <div class=\"item-input\" style=\"width: 200px; margin-right: 6px\">\r\n              <DxTextBox\r\n                placeholder=\"\"\r\n                v-model=\"employee.BankAccount\"\r\n                max-length=\"20\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class=\"item\">\r\n            <div class=\"item-title\">Tên ngân hàng</div>\r\n            <div class=\"item-input\" style=\"width: 200px; margin-right: 6px\">\r\n              <DxTextBox\r\n                placeholder=\"\"\r\n                v-model=\"employee.BankName\"\r\n                max-length=\"255\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class=\"item\">\r\n            <div class=\"item-title\">Chi nhánh</div>\r\n            <div class=\"item-input\" style=\"width: 200px\">\r\n              <DxTextBox\r\n                placeholder=\"\"\r\n                v-model=\"employee.BankBranch\"\r\n                max-length=\"255\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"content-control flex\">\r\n        <div class=\"control-left\" @click=\"hideDialogDetail\">\r\n          <m-button buttonName=\"Hủy\" buttonType=\"white\"></m-button>\r\n        </div>\r\n        <div class=\"control-right flex\">\r\n          <div @click=\"saveOnClick\"><m-button buttonName=\"Cất\" buttonType=\"white\"></m-button></div>\r\n          <div @click=\"refillFormOnClick\"><m-button buttonName=\"Cất và thêm\" buttonType=\"green\"></m-button></div>\r\n        </div>\r\n      </div>\r\n    </template>\r\n  </m-popup>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport MPopup from \"@/components/base/popup/MPopup.vue\";\r\nimport MCheckbox from \"@/components/base/checkbox/MCheckbox.vue\";\r\nimport MRadioCheckbox from '@/components/base/checkbox/MRadioCheckbox.vue';\r\nimport MButton from '@/components/base/button/MButton.vue';\r\nimport { mapMutations, mapActions, mapGetters } from \"vuex\";\r\n\r\nexport default {\r\n  components: { MPopup, MCheckbox, MRadioCheckbox, MButton },\r\n  props: ['isHide', 'saveMode', 'employeeSelected'],\r\n  data() {\r\n    return {\r\n      employee: {},\r\n      isCustomer: false,\r\n      isGroup: false,\r\n      isShowError: [],\r\n      errorText: [],\r\n      isValid: true,\r\n      elementFocus: null,\r\n      isSuccess: false,\r\n      addMode: 0,\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"organizations\", \"positions\"])\r\n  },\r\n  mounted(){\r\n    this.getOrganizations();\r\n    this.getPositions();\r\n  },\r\n  watch: {\r\n    employeeSelected: function(value){\r\n      this.employee = value;\r\n    },\r\n    isHide: function(value){\r\n      if(!value && this.saveMode == 1){\r\n        this.getNewEmployeeCode();\r\n        this.employee.Gender = 1;\r\n      } else if(!value && this.saveMode == 3){\r\n        this.getNewEmployeeCode();\r\n      }\r\n      this.isSuccess = false;\r\n    },\r\n    saveMode: function(value){\r\n      this.addMode = value;\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations([ \"setOrganizations\", \"setPositions\"]),\r\n    ...mapActions([ \"getOrganizations\", \"getPositions\"]),\r\n\r\n    /**\r\n     * Thực hiện tắt form thông tin chi tiết\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    hideDialogDetail(){\r\n      this.$emit(\"hideDetail\", null, true);\r\n    },\r\n\r\n    /**\r\n     * focus vào ô input đầu tiên mỗi khi mở form chi tiết\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    onInitialized: function (e) {\r\n      this.elementFocus = e;\r\n      setTimeout(function () {\r\n        e.component.focus();  \r\n      }, 0);  \r\n    },\r\n\r\n    /**\r\n     * Khi bấm cất, thêm nhân viên rồi tắt form\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    async saveOnClick(){\r\n      await this.addEmployee();\r\n      if(this.isSuccess){\r\n        this.$emit(\"hideDetail\", null, true);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Gọi api thêm, sửa nhân viên\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    async addEmployee(){\r\n      var axiosMethod = \"\";\r\n      var toastText = \"\";\r\n      document.getElementById(\"loader\").style.display = \"block\";\r\n      var me = this;\r\n      var newGuid = this.$uuid.v4();\r\n      if(this.addMode == 1){\r\n        me.employee.EmployeeID = newGuid;\r\n        axiosMethod = 'post';\r\n        toastText = \"Thêm người dùng thành công\";\r\n      } else if(this.addMode == 2){\r\n        axiosMethod = 'put';\r\n        toastText = \"Sửa người dùng thành công\";\r\n      } else if(this.addMode == 3){\r\n        me.employee.EmployeeID = newGuid;\r\n        axiosMethod = 'post';\r\n        toastText = \"Nhân bản người dùng thành công\";\r\n      }\r\n      var list = [];\r\n      list.push(this.employee);\r\n      me.validateEmployee();\r\n      if(this.isValid){\r\n        try {\r\n          await axios({\r\n            method: axiosMethod,\r\n            url: \"https://localhost:44317/api/v1/Employees\",\r\n            data: list\r\n          })\r\n            .then(() => {\r\n              document.getElementById(\"loader\").style.display = \"none\";\r\n              me.isSuccess = true;\r\n              me.employee = {};\r\n              me.$emit(\"loadData\", 20, 1, \"\");\r\n              me.$emit(\"showToast\", toastText)\r\n              me.getNewEmployeeCode();\r\n              this.addMode = 1;\r\n            }).catch((error) => {\r\n              document.getElementById(\"loader\").style.display = \"none\";\r\n              if(error.response.data.errorMsg[0] == \"Mã nhân viên đã tồn tại trong hệ thống\"){\r\n                let el = document.getElementById(\"employeeCodeInput\");\r\n                el.classList.add(\"check-border\");\r\n                me.errorText[0] = \"Mã không được trùng.\"\r\n                me.onInitialized(this.elementFocus);\r\n              }\r\n            })\r\n        } catch (error) {\r\n          document.getElementById(\"loader\").style.display = \"none\";\r\n        }\r\n      } else {\r\n        document.getElementById(\"loader\").style.display = \"none\";\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Khi bấm cất và thêm, thực hiên cất rồi reset form để tiếp tục thêm mới\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    async refillFormOnClick(){\r\n      await this.addEmployee();\r\n      this.isSuccess = false;\r\n      this.onInitialized(this.elementFocus);\r\n    },\r\n\r\n    /**\r\n     * Check các check box là khách hàng và là nhà cung cấp\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    checkCheckbox(check){\r\n      if(check == 1){\r\n        if(this.employee.IsCustomer == 1){\r\n          this.employee.IsCustomer = 0;\r\n        } else {\r\n          this.employee.IsCustomer = 1;\r\n        }\r\n      } else if(check == 2) {\r\n        if(this.employee.IsGroup == 1){\r\n          this.employee.IsGroup = 0;\r\n        } else {\r\n          this.employee.IsGroup = 1;\r\n        }\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Check radio giới tính\r\n     * 1: Nam, 2: Nữ\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    checkRadio(check){\r\n      if(check == 1){\r\n        this.employee.Gender = 1;\r\n      } else if(check == 2){\r\n        this.employee.Gender = 2;\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Thực hiện validate nhân viên khi bấm cất\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    validateEmployee(){\r\n      this.isValid = true;\r\n      this.validateEmployeeCode();\r\n      this.validateFullName();\r\n      this.validateOrganization();\r\n      this.validateDateOfBirth();\r\n      this.validateDateOfIssuanceCIC();\r\n      this.validateEmail();\r\n      for (let i = 0; i < this.errorText.length; i++) {\r\n        if(this.errorText[i]){\r\n          this.isValid = false;\r\n          break;\r\n        }\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Validate mã nhân viên\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    validateEmployeeCode(){\r\n      let el = document.getElementById(\"employeeCodeInput\");\r\n      if(!this.employee.EmployeeCode){\r\n        el.classList.add(\"check-border\");\r\n        this.errorText[0] = \"Mã không được để trống.\"\r\n      } else {\r\n        el.classList.remove(\"check-border\");\r\n        this.errorText[0] = \"\";\r\n      }\r\n    },\r\n    \r\n    /**\r\n     * Validate tên nhân viên\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    validateFullName(){\r\n      let el = document.getElementById(\"fullNameInput\");\r\n      if(!this.employee.FullName){\r\n        el.classList.add(\"check-border\");\r\n        this.errorText[1] = \"Tên không được để trống.\"\r\n      } else {\r\n        el.classList.remove(\"check-border\");\r\n        this.errorText[1] = \"\";\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Validate tên đơn vị\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    validateOrganization(){\r\n      let el = document.getElementById(\"organizationInput\");\r\n      if(!this.employee.OrganizationID){\r\n        el.classList.add(\"check-border\");\r\n        this.errorText[2] = \"Đơn vị không được để trống.\"\r\n      } else {\r\n        el.classList.remove(\"check-border\");\r\n        this.errorText[2] = \"\";\r\n      }\r\n    },\r\n    \r\n    /**\r\n     * Validate email đúng định dạng\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    validateEmail(){\r\n      let el = document.getElementById(\"emailInput\");\r\n      if(this.employee.Email){\r\n        var emailFormat = /^([a-zA-Z0-9_\\-.]+)@([a-zA-Z0-9_\\-.]+)\\.([a-zA-Z]{2,5})$/;\r\n        if (!emailFormat.test(this.employee.Email)) {\r\n          el.classList.add(\"check-border\");\r\n          this.errorText[5] = \"Email không đúng định dạng.\"\r\n        } else {\r\n          el.classList.remove(\"check-border\");\r\n          this.errorText[5] = \"\";\r\n        }\r\n      } else {\r\n        el.classList.remove(\"check-border\");\r\n        this.errorText[5] = \"\";\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Validate ngày sinh lớn hơn ngày hiện tại\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    validateDateOfBirth(){\r\n      let el = document.getElementById(\"dobInput\");\r\n      console.log(this.employee.DateOfBirth);\r\n      if(this.employee.DateOfBirth){\r\n        let today = new Date();\r\n        \r\n        if(this.employee.DateOfBirth > today){\r\n          el.classList.add(\"check-border\");\r\n          this.errorText[3] = \"Ngày sinh không được lớn hơn ngày hiện tại.\"\r\n        } else {\r\n          el.classList.remove(\"check-border\");\r\n          this.errorText[3] = \"\";\r\n        }\r\n      } else {\r\n        el.classList.remove(\"check-border\");\r\n        this.errorText[3] = \"\";\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Validate ngày cấp không lớn hơn ngày hiện tại\r\n     * Author: VQBao - 12/10/2022\r\n     */\r\n    validateDateOfIssuanceCIC(){\r\n      let el = document.getElementById(\"doiInput\");\r\n      if(this.employee.DateOfIssuanceCIC){\r\n        let today = new Date();\r\n        if(this.employee.DateOfIssuanceCIC > today){\r\n          el.classList.add(\"check-border\");\r\n          this.errorText[4] = \"Ngày cấp không được lớn hơn ngày hiện tại\"\r\n        } else {\r\n          el.classList.remove(\"check-border\");\r\n          this.errorText[4] = \"\";\r\n        }\r\n      } else {\r\n        el.classList.remove(\"check-border\");\r\n        this.errorText[4] = \"\";\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Lấy mã nhân viên mới\r\n     * Author: VQBao - 11/10/2022\r\n     */\r\n    getNewEmployeeCode(){\r\n      try {\r\n        axios.get(\"https://localhost:44317/api/v1/Employees/NewEmployeeCode\")\r\n        .then((response) => {\r\n          if(!this.isHide){\r\n            this.employee.EmployeeCode = response.data;\r\n            if(this.addMode == 1){\r\n              this.employee.Gender = 1;\r\n            }\r\n          }\r\n        })\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n.hide {\r\n  display: none !important;\r\n}\r\n.header {\r\n  width: 836px;\r\n  height: 73px;\r\n  box-sizing: border-box;\r\n}\r\n.header-title {\r\n  font-size: 24px;\r\n  color: #111;\r\n  font-weight: 700;\r\n  height: 33px;\r\n}\r\n.header-checkbox {\r\n  padding: 0 20px;\r\n}\r\n.require-input {\r\n  color: #ff0000;\r\n}\r\n.content-left {\r\n  width: 418px;\r\n  padding: 0 26px 0 0;\r\n  box-sizing: border-box;\r\n}\r\n.item-title {\r\n  height: 21px;\r\n  font-size: 12px;\r\n  font-weight: 700;\r\n}\r\n.content-left-row {\r\n  width: 392px;\r\n  height: 65px;\r\n  box-sizing: border-box;\r\n  padding-bottom: 10px;\r\n}\r\n.content-bottom {\r\n  width: 836px;\r\n  padding-bottom: 24px;\r\n  box-sizing: border-box;\r\n  margin-top: 24px;\r\n  border-bottom: 1px solid #c9ccd2;\r\n}\r\n.content-control {\r\n  padding: 20px 0;\r\n  width: 836px;\r\n  position: relative;\r\n}\r\n.control-right {\r\n  position: absolute;\r\n  top: 20px;\r\n  right: -10px;\r\n}\r\n.header-right {\r\n  position: absolute;\r\n  top: 12px;\r\n  right: -10px;\r\n}\r\n.header-icon {\r\n  width: 24px;\r\n  height: 24px;\r\n  justify-content: center;\r\n  margin-left: 6px;\r\n  cursor: pointer;\r\n}\r\n.check-border {\r\n  box-sizing: border-box;\r\n  border: 1px solid red;\r\n  border-radius: 2px;\r\n}\r\n.check-border .dx-texteditor.dx-editor-outlined{\r\n  border: none !important;\r\n}\r\n.gender-input {\r\n  display: flex;\r\n  border: none;\r\n}\r\n/* .dx-dropdownlist-popup-wrapper .dx-list .dx-scrollable-content {\r\n  padding-top: 20px !important;\r\n} */\r\n.custom-item {\r\n  display: flex;\r\n}\r\n.org-code{\r\n  width: 100px;\r\n  margin-right: 6px;\r\n}\r\n.validate-error {\r\n  position: absolute;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin: auto;\r\n  left: 0;\r\n  right: 0;\r\n  text-align: center;\r\n}\r\n.arrow {\r\n  width: 8px;\r\n  height: 8px;\r\n  background-color: #f34a4a;\r\n  transform: rotate(45deg);\r\n}\r\n.error-text {\r\n  background-color: #f34a4a;\r\n  color: #fff;\r\n  border-radius: 4px;\r\n  height: 24px;\r\n  width: max-content;\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 0 6px;\r\n  margin-top: -4px;\r\n}\r\n.item-input {\r\n  position: relative;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}